!function(){"use strict";window.no0p=function(){},window.HYPER={},window.mobileAndTabletcheck=function(){var a=!1;return function(b){(/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino|android|ipad|playbook|silk/i.test(b)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(b.substr(0,4)))&&(a=!0)}(navigator.userAgent||navigator.vendor||window.opera),a}}(),function(){"use strict";HYPER.Math={getAllArray:function(a,b){for(let c=0;c<a.length;c++)b(c,a[c])},RadiansToDegrees:function(a){return a*(180/Math.PI)},degreesToRadians:function(a){return a*(Math.PI/180)},random:function(a,b,c){return c=c||!1,b=b||0,a=a||1,c?Math.random()*(a-b)+b:Math.round(Math.random()*(a-b)+b)}}}(),function(){"use strict";HYPER.Timer={},HYPER.Timer.tick=0,HYPER.Timer.fps=60,HYPER.Timer.now,HYPER.Timer.then=Date.now(),HYPER.Timer.interval=1e3/HYPER.Timer.fps,HYPER.Timer.delta,HYPER.Timer.setFPS=function(a){HYPER.Timer.fps=a,HYPER.Timer.interval=1e3/HYPER.Timer.fps},HYPER.Timer.children=[],HYPER.Timer.addOnTick=function(a){HYPER.Timer.children.push(a)},HYPER.Timer.setTimer=function(a,b){var c=HYPER.Timer.fps*a,d=function(){HYPER.Timer.tick===d.originTime+c&&(d.callback(),HYPER.Timer.removeChild(this))};d._ID=""+Math.random()+Math.random(),d.originTime=HYPER.Timer.tick,d.callback=b,HYPER.Timer.children.push(d)},HYPER.Timer.removeChild=function(a){for(let b=0;b<HYPER.Timer.children.length;b++)(a._ID=HYPER.Timer.children[b]._ID)&&HYPER.Timer.children.splice(b,1)},HYPER.Timer.Ticker=function(){if(requestAnimationFrame(HYPER.Timer.Ticker),HYPER.Timer.now=Date.now(),HYPER.Timer.delta=HYPER.Timer.now-HYPER.Timer.then,HYPER.Timer.delta>HYPER.Timer.interval){HYPER.Timer.then=HYPER.Timer.now-HYPER.Timer.delta%HYPER.Timer.interval;for(let a=0;a<HYPER.Timer.children.length;a++)HYPER.Timer.children[a](HYPER.Timer.tick);HYPER.Timer.tick++}},HYPER.Timer.init=function(){HYPER.Timer.Ticker()}}(),function(){"use strict";HYPER.Input={},HYPER.Input.Pointer={point:[],getPointer:function(a){return a=a||0,this.point[a]},getClick:function(a){return a=a||0,this.point[a].click},getHold:function(a){return a=a||0,this.point[a].click},getUp:function(a){return a=a||0,this.point[a].click},getDown:function(a){return a=a||0,this.point[a].click},getPosition:function(a){return a=a||0,{x:this.point[a].x,y:this.point[a].y}},_listeners:{mousemove:function(a){a.preventDefault(),HYPER.Input.Pointer.point[0]._x=a.pageX,HYPER.Input.Pointer.point[0]._y=a.pageY},mousedown:function(a){a.preventDefault(),HYPER.Input.Pointer.point[0]._x=a.pageX,HYPER.Input.Pointer.point[0]._y=a.pageY,HYPER.Input.Pointer.point[0]._down=!0,HYPER.Input.Pointer.point[0]._hold=!0},mouseup:function(a){a.preventDefault(),HYPER.Input.Pointer.point[0]._x=a.pageX,HYPER.Input.Pointer.point[0]._y=a.pageY,HYPER.Input.Pointer.point[0]._up=!0,HYPER.Input.Pointer.point[0]._hold=!1},touchmove:function(a){a.preventDefault(),HYPER.Input.Pointer.point[a.which]._x=a.changedTouches[a.which].pageX,HYPER.Input.Pointer.point[a.which]._y=a.changedTouches[a.which].pageY},touchstart:function(a){a.preventDefault(),HYPER.Input.Pointer.point[a.which]._x=a.changedTouches[a.which].pageX,HYPER.Input.Pointer.point[a.which]._y=a.changedTouches[a.which].pageY,HYPER.Input.Pointer.point[a.which]._down=!0,HYPER.Input.Pointer.point[a.which]._hold=!0},touchend:function(a){a.preventDefault(),HYPER.Input.Pointer.point[a.which]._x=a.changedTouches[a.which].pageX,HYPER.Input.Pointer.point[a.which]._y=a.changedTouches[a.which].pageY,HYPER.Input.Pointer.point[a.which]._up=!0,HYPER.Input.Pointer.point[a.which]._hold=!1},preventDefault:function(a){a.preventDefault()}}},HYPER.Input.Keys={key:[],getKey:function(a){return a=a.toLocaleLowerCase(),"backspace"===a?HYPER.Input.Keys.key[8]:"tab"===a?HYPER.Input.Keys.key[9]:"enter"===a?HYPER.Input.Keys.key[13]:"shift"===a?HYPER.Input.Keys.key[16]:"ctrl"===a?HYPER.Input.Keys.key[17]:"alt"===a?HYPER.Input.Keys.key[18]:"pause/break"===a?HYPER.Input.Keys.key[19]:"caps lock"===a?HYPER.Input.Keys.key[20]:"escape"===a?HYPER.Input.Keys.key[27]:"page up"===a?HYPER.Input.Keys.key[33]:"page down"===a?HYPER.Input.Keys.key[34]:"end"===a?HYPER.Input.Keys.key[35]:"home"===a?HYPER.Input.Keys.key[36]:"left arrow"===a?HYPER.Input.Keys.key[37]:"up arrow"===a?HYPER.Input.Keys.key[38]:"right arrow"===a?HYPER.Input.Keys.key[39]:"down arrow"===a?HYPER.Input.Keys.key[40]:"space"===a?HYPER.Input.Keys.key[32]:"insert"===a?HYPER.Input.Keys.key[45]:"delete"===a?HYPER.Input.Keys.key[46]:"0"===a?HYPER.Input.Keys.key[48]:"1"===a?HYPER.Input.Keys.key[49]:"2"===a?HYPER.Input.Keys.key[50]:"3"===a?HYPER.Input.Keys.key[51]:"4"===a?HYPER.Input.Keys.key[52]:"5"===a?HYPER.Input.Keys.key[53]:"6"===a?HYPER.Input.Keys.key[54]:"7"===a?HYPER.Input.Keys.key[55]:"8"===a?HYPER.Input.Keys.key[56]:"9"===a?HYPER.Input.Keys.key[57]:"a"===a?HYPER.Input.Keys.key[65]:"b"===a?HYPER.Input.Keys.key[66]:"c"===a?HYPER.Input.Keys.key[67]:"d"===a?HYPER.Input.Keys.key[68]:"e"===a?HYPER.Input.Keys.key[69]:"f"===a?HYPER.Input.Keys.key[70]:"g"===a?HYPER.Input.Keys.key[71]:"h"===a?HYPER.Input.Keys.key[72]:"i"===a?HYPER.Input.Keys.key[73]:"j"===a?HYPER.Input.Keys.key[74]:"k"===a?HYPER.Input.Keys.key[75]:"l"===a?HYPER.Input.Keys.key[76]:"m"===a?HYPER.Input.Keys.key[77]:"n"===a?HYPER.Input.Keys.key[78]:"o"===a?HYPER.Input.Keys.key[79]:"p"===a?HYPER.Input.Keys.key[80]:"q"===a?HYPER.Input.Keys.key[81]:"r"===a?HYPER.Input.Keys.key[82]:"s"===a?HYPER.Input.Keys.key[83]:"t"===a?HYPER.Input.Keys.key[84]:"u"===a?HYPER.Input.Keys.key[85]:"v"===a?HYPER.Input.Keys.key[86]:"w"===a?HYPER.Input.Keys.key[87]:"x"===a?HYPER.Input.Keys.key[88]:"y"===a?HYPER.Input.Keys.key[89]:"z"===a?HYPER.Input.Keys.key[90]:"left window key"===a?HYPER.Input.Keys.key[91]:"right window key"===a?HYPER.Input.Keys.key[92]:"select key"===a?HYPER.Input.Keys.key[93]:"numpad 0"===a?HYPER.Input.Keys.key[96]:"numpad 1"===a?HYPER.Input.Keys.key[97]:"numpad 2"===a?HYPER.Input.Keys.key[98]:"numpad 3"===a?HYPER.Input.Keys.key[99]:"numpad 4"===a?HYPER.Input.Keys.key[100]:"numpad 5"===a?HYPER.Input.Keys.key[101]:"numpad 6"===a?HYPER.Input.Keys.key[102]:"numpad 7"===a?HYPER.Input.Keys.key[103]:"numpad 8"===a?HYPER.Input.Keys.key[104]:"numpad 9"===a?HYPER.Input.Keys.key[105]:"multiply"===a?HYPER.Input.Keys.key[106]:"add"===a?HYPER.Input.Keys.key[107]:"subtract"===a?HYPER.Input.Keys.key[109]:"decimal point"===a?HYPER.Input.Keys.key[110]:"divide"===a?HYPER.Input.Keys.key[111]:"f1"===a?HYPER.Input.Keys.key[112]:"f2"===a?HYPER.Input.Keys.key[113]:"f3"===a?HYPER.Input.Keys.key[114]:"f4"===a?HYPER.Input.Keys.key[115]:"f5"===a?HYPER.Input.Keys.key[116]:"f6"===a?HYPER.Input.Keys.key[117]:"f7"===a?HYPER.Input.Keys.key[118]:"f8"===a?HYPER.Input.Keys.key[119]:"f9"===a?HYPER.Input.Keys.key[120]:"f10"===a?HYPER.Input.Keys.key[121]:"f11"===a?HYPER.Input.Keys.key[122]:"f12"===a?HYPER.Input.Keys.key[123]:"num lock"===a?HYPER.Input.Keys.key[144]:"scroll lock"===a?HYPER.Input.Keys.key[145]:"semi-colon"===a?HYPER.Input.Keys.key[186]:"equal sign"===a?HYPER.Input.Keys.key[187]:"comma"===a?HYPER.Input.Keys.key[188]:"dash"===a?HYPER.Input.Keys.key[189]:"period"===a?HYPER.Input.Keys.key[190]:"forward slash"===a?HYPER.Input.Keys.key[191]:"grave accent"===a?HYPER.Input.Keys.key[192]:"open bracket"===a?HYPER.Input.Keys.key[219]:"back slash"===a?HYPER.Input.Keys.key[220]:"close braket"===a?HYPER.Input.Keys.key[221]:"single quote"===a?HYPER.Input.Keys.key[222]:void 0},getKeyFromID:function(a){return 8===a?"backspace":9===a?"tab":13===a?"enter":16===a?"shift":17===a?"ctrl":18===a?"alt":19===a?"pause/break":20===a?"caps lock":27===a?"escape":33===a?"page up":34===a?"page down":35===a?"end":36===a?"home":37===a?"left arrow":38===a?"up arrow":39===a?"right arrow":40===a?"down arrow":32===a?"space":45===a?"insert":46===a?"delete":48===a?"0":49===a?"1":50===a?"2":51===a?"3":52===a?"4":53===a?"5":54===a?"6":55===a?"7":56===a?"8":57===a?"9":65===a?"a":66===a?"b":67===a?"c":68===a?"d":69===a?"e":70===a?"f":71===a?"g":72===a?"h":73===a?"i":74===a?"j":75===a?"k":76===a?"l":77===a?"m":78===a?"n":79===a?"o":80===a?"p":81===a?"q":82===a?"r":83===a?"s":84===a?"t":85===a?"u":86===a?"v":87===a?"w":88===a?"x":89===a?"y":90===a?"z":91===a?"left window key":92===a?"right window key":93===a?"select key":96===a?"numpad 0":97===a?"numpad 1":98===a?"numpad 2":99===a?"numpad 3":100===a?"numpad 4":101===a?"numpad 5":102===a?"numpad 6":103===a?"numpad 7":104===a?"numpad 8":105===a?"numpad 9":106===a?"multiply":107===a?"add":109===a?"subtract":110===a?"decimal point":111===a?"divide":112===a?"f1":113===a?"f2":114===a?"f3":115===a?"f4":116===a?"f5":117===a?"f6":118===a?"f7":119===a?"f8":120===a?"f9":121===a?"f10":122===a?"f11":123===a?"f12":144===a?"num lock":145===a?"scroll lock":186===a?"semi-colon":187===a?"equal sign":188===a?"comma":189===a?"dash":190===a?"period":191===a?"forward slash":192===a?"grave accent":219===a?"open bracket":220===a?"back slash":221===a?"close braket":222===a?"single quote":void 0},_listeners:{onkeyup:function(a){HYPER.Input.Keys.key[a.which]._up=!0,HYPER.Input.Keys.key[a.which]._hold=!1},onkeydown:function(a){HYPER.Input.Keys.key[a.which]._down=!0,HYPER.Input.Keys.key[a.which]._hold=!0}}},HYPER.Input._addEventListeners=function(){mobileAndTabletcheck()?(document.addEventListener("touchmove",HYPER.Input.Pointer._listeners.touchmove),document.addEventListener("touchstart",HYPER.Input.Pointer._listeners.touchstart),document.addEventListener("touchend",HYPER.Input.Pointer._listeners.touchend),document.addEventListener("touchcancel",HYPER.Input.Pointer._listeners.touchend)):(document.addEventListener("mousemove",HYPER.Input.Pointer._listeners.mousemove),document.addEventListener("mousedown",HYPER.Input.Pointer._listeners.mousedown),document.addEventListener("mouseup",HYPER.Input.Pointer._listeners.mouseup)),window.addEventListener("keydown",HYPER.Input.Keys._listeners.onkeydown),window.addEventListener("keyup",HYPER.Input.Keys._listeners.onkeyup),window.addEventListener("drag",HYPER.Input.Pointer._listeners.preventDefault)},HYPER.Input.screens=[],HYPER.Input.addScreen=function(a){HYPER.Input.screens.push(a)},HYPER.Input.init=function(){function b(){for(let a=0;a<10;a++){HYPER.Input.Pointer.point[a].x=HYPER.Input.Pointer.point[a]._x,HYPER.Input.Pointer.point[a].y=HYPER.Input.Pointer.point[a]._y,HYPER.Input.Pointer.point[a].up=HYPER.Input.Pointer.point[a]._up,HYPER.Input.Pointer.point[a].down=HYPER.Input.Pointer.point[a]._down,HYPER.Input.Pointer.point[a].hold=HYPER.Input.Pointer.point[a]._hold,HYPER.Input.Pointer.point[a].dblclick=HYPER.Input.Pointer.point[a]._dblclick,HYPER.Input.Pointer.point[a].click=HYPER.Input.Pointer.point[a]._up,HYPER.Input.Pointer.point[a]._up=!1,HYPER.Input.Pointer.point[a]._down=!1,HYPER.Input.Pointer.point[a]._dblclick=!1;for(let b=0;b<HYPER.Input.screens.length;b++)HYPER.Input.Pointer.point[a].click&&HYPER.Input.screens[b]._onClick(a),HYPER.Input.Pointer.point[a].up&&HYPER.Input.screens[b]._onUp(a),HYPER.Input.Pointer.point[a].down&&HYPER.Input.screens[b]._onDown(a),HYPER.Input.Pointer.point[a].hold&&HYPER.Input.screens[b]._onHold(a),HYPER.Input.Pointer.point[a].dblclick&&HYPER.Input.screens[b]._onDblClick(a)}for(let a=0;a<300;a++){HYPER.Input.Keys.key[a].up=HYPER.Input.Keys.key[a]._up,HYPER.Input.Keys.key[a].down=HYPER.Input.Keys.key[a]._down,HYPER.Input.Keys.key[a].hold=HYPER.Input.Keys.key[a]._hold,HYPER.Input.Keys.key[a]._up=!1,HYPER.Input.Keys.key[a]._down=!1;for(let b=0;b<HYPER.Input.screens.length;b++)HYPER.Input.Keys.key[a].up&&HYPER.Input.screens[b]._onKeyUp(HYPER.Input.Keys.getKeyFromID(a)),HYPER.Input.Keys.key[a].down&&HYPER.Input.screens[b]._onKeyDown(HYPER.Input.Keys.getKeyFromID(a)),HYPER.Input.Keys.key[a].hold&&HYPER.Input.screens[b]._onKeyHeld(HYPER.Input.Keys.getKeyFromID(a))}}for(let a=0;a<10;a++)HYPER.Input.Pointer.point[a]={x:0,y:0,up:!1,down:!1,hold:!1,dblclick:!1,_x:0,_y:0,_up:!1,_down:!1,_hold:!1,_dblclick:!1};for(let a=0;a<300;a++)HYPER.Input.Keys.key[a]||(HYPER.Input.Keys.key[a]={_up:!1,_down:!1,_hold:!1,up:!1,down:!1,hold:!1,_ID:a}),HYPER.Input.Keys.key[a].up=HYPER.Input.Keys.key[a]._up,HYPER.Input.Keys.key[a].down=HYPER.Input.Keys.key[a]._down,HYPER.Input.Keys.key[a].hold=HYPER.Input.Keys.key[a]._hold,HYPER.Input.Keys.key[a]._up=!1,HYPER.Input.Keys.key[a]._down=!1;HYPER.Input._addEventListeners(),HYPER.Timer.addOnTick(b)}}(),function(){"use strict";HYPER.Preload={info:{load:0,loaded:0},getNumberLoaded:function(){return HYPER.Preload.info.loaded},getNeededLoaded:function(){return HYPER.Preload.info.load},getLoaded:function(){return HYPER.Preload.info.loaded/HYPER.Preload.info.load}}}(),function(){"use strict";HYPER.Preload.Bitmap=function(a){this._ID="bitmap "+Math.random()+Math.random(),this.type="bitmap",this.image=new Image,this.image.src=a.src,this.bitmap=document.createElement("canvas"),this.ctx=this.bitmap.getContext("2d"),this.flippedX={},this.flippedY={},this.flippedXY={},this.flippedX.bitmap=document.createElement("canvas"),this.flippedX.ctx=this.flippedX.bitmap.getContext("2d"),this.flippedY.bitmap=document.createElement("canvas"),this.flippedY.ctx=this.flippedY.bitmap.getContext("2d"),this.flippedXY.bitmap=document.createElement("canvas"),this.flippedXY.ctx=this.flippedXY.bitmap.getContext("2d"),this.onload=a.onload||no0p,HYPER.Preload.info.load++;var b=this;this.image.onload=function(){b.bitmap.width=b.image.width,b.flippedX.bitmap.width=b.image.width,b.flippedY.bitmap.width=b.image.width,b.flippedXY.bitmap.width=b.image.width,b.bitmap.height=b.image.height,b.flippedX.bitmap.height=b.image.height,b.flippedY.bitmap.height=b.image.height,b.flippedXY.bitmap.height=b.image.height,b.width=b.image.width,b.height=b.image.height,b.ctx.drawImage(b.image,0,0,b.image.width,b.image.height,0,0,b.bitmap.width,b.bitmap.height),b.flippedX.ctx.translate(b.width/2,b.height/2),b.flippedX.ctx.scale(-1,1),b.flippedX.ctx.drawImage(b.image,0,0,b.image.width,b.image.height,-b.width/2,-b.height/2,b.flippedX.bitmap.width,b.flippedX.bitmap.height),b.flippedX.ctx.scale(-1,1),b.flippedX.ctx.translate(-b.width/2,-b.height/2),b.flippedY.ctx.translate(b.width/2,b.height/2),b.flippedY.ctx.scale(1,-1),b.flippedY.ctx.drawImage(b.image,0,0,b.image.width,b.image.height,-b.width/2,-b.height/2,b.flippedY.bitmap.width,b.flippedY.bitmap.height),b.flippedY.ctx.scale(1,-1),b.flippedY.ctx.translate(-b.width/2,-b.height/2),b.flippedXY.ctx.translate(b.width/2,b.height/2),b.flippedXY.ctx.scale(-1,-1),b.flippedXY.ctx.drawImage(b.image,0,0,b.image.width,b.image.height,-b.width/2,-b.height/2,b.flippedXY.bitmap.width,b.flippedXY.bitmap.height),b.flippedXY.ctx.scale(-1,-1),b.flippedXY.ctx.translate(-b.width/2,-b.height/2),HYPER.Preload.info.loaded++,b.onload()}},HYPER.Preload.Bitmap.prototype={draw:function(a){return HYPER.Graphics.Draw(this.ctx,a)},clear:function(){HYPER.Graphics.Draw(this.ctx).clearRect(0,0,this.bitmap.width,this.bitmap.height)}}}(),function(){"use strict";HYPER.Preload.SpriteSheet=function(a){this._ID="spritesheet "+Math.random()+Math.random(),this.type="spritesheet",this.onload=a.onload||no0p,this.image=new Image,this.image.src=a.src,this.bitmap=document.createElement("canvas"),this.ctx=this.bitmap.getContext("2d"),this.flippedX={},this.flippedY={},this.flippedXY={},this.flippedX.bitmap=document.createElement("canvas"),this.flippedX.ctx=this.flippedX.bitmap.getContext("2d"),this.flippedY.bitmap=document.createElement("canvas"),this.flippedY.ctx=this.flippedY.bitmap.getContext("2d"),this.flippedXY.bitmap=document.createElement("canvas"),this.flippedXY.ctx=this.flippedXY.bitmap.getContext("2d"),this.frames=a.frames||{},this.frames.wide=a.frames.wide||1,this.frames.tall=a.frames.tall||1,this.frameINFO=a.frameINFO||[],this.width=0,this.height=0,this.animations={};var b=this;this.image.onload=function(){b.bitmap.width=b.image.width,b.flippedX.bitmap.width=b.image.width,b.flippedY.bitmap.width=b.image.width,b.flippedXY.bitmap.width=b.image.width,b.bitmap.height=b.image.height,b.flippedX.bitmap.height=b.image.height,b.flippedY.bitmap.height=b.image.height,b.flippedXY.bitmap.height=b.image.height,b.ctx.drawImage(b.image,0,0,b.image.width,b.image.height,0,0,b.bitmap.width,b.bitmap.height),b.setFramesOBJ(b.frames),b.width=b.width||b.frames.wide/b.bitmap.width,b.height=b.height||b.frames.tall/b.bitmap.height,b.flippedX.ctx.translate(b.image.width/2,b.image.height/2),b.flippedX.ctx.scale(-1,1),b.flippedX.ctx.drawImage(b.image,0,0,b.image.width,b.image.height,-b.image.width/2,-b.image.height/2,b.flippedX.bitmap.width,b.flippedX.bitmap.height),b.flippedX.ctx.scale(-1,1),b.flippedX.ctx.translate(-b.image.width/2,-b.image.height/2),b.flippedY.ctx.translate(b.image.width/2,b.image.height/2),b.flippedY.ctx.scale(1,-1),b.flippedY.ctx.drawImage(b.image,0,0,b.image.width,b.image.height,-b.image.width/2,-b.image.height/2,b.flippedY.bitmap.width,b.flippedY.bitmap.height),b.flippedY.ctx.scale(1,-1),b.flippedY.ctx.translate(-b.image.width/2,-b.image.height/2),b.flippedXY.ctx.translate(b.image.width/2,b.image.height/2),b.flippedXY.ctx.scale(-1,-1),b.flippedXY.ctx.drawImage(b.image,0,0,b.image.width,b.image.height,-b.image.width/2,-b.image.height/2,b.flippedXY.bitmap.width,b.flippedXY.bitmap.height),b.flippedXY.ctx.scale(-1,-1),b.flippedXY.ctx.translate(-b.image.width/2,-b.image.height/2),HYPER.Preload.info.loaded++,b.onload()}},HYPER.Preload.SpriteSheet.prototype={draw:function(a){return HYPER.Graphics.Draw(this.ctx,a)},clear:function(){HYPER.Graphics.Draw(this.ctx).clearRect(0,0,this.bitmap.width,this.bitmap.height)},setAnimation:function(a){for(let b=0;b<arguments.length;b++)arguments[b].name=arguments[b].name||"animation"+Math.random()+Math.random(),this.animations[a.name]={},this.animations[a.name].frames=a.frames||[0],this.animations[a.name].next=a.next||a.name,this.animations[a.name].fps=a.fps||30,this.animations[a.name].loop=a.loop||!1,this.animations[a.name].onLoop=a.onLoop||no0p,this.animations[a.name].onFrame=a.onFrame||no0p},setFrames:function(a){if(Array.isArray(a))for(let b=0;b<a.length;b++)this.frameINFO[b]=a[b],this.frameINFO[b].onFrame=a[b].onFrame||no0p,this.frameINFO[b].x=a[b].x,this.frameINFO[b].y=a[b].y,this.frameINFO[b].width=a[b].width,this.frameINFO[b].height=a[b].height,this.frameINFO[b].regX=a[b].regX||0,this.frameINFO[b].regY=a[b].regY||0},setFramesOBJ:function(a,b){if(a){b=b||!0;var c=0,d=0;if(b)for(let b=0;b<a.wide*a.tall;b++)c=b%a.wide*(this.bitmap.width/a.wide),d=Math.floor(b/a.wide)*(this.bitmap.height/a.tall),this.frameINFO[b]||(this.frameINFO[b]={}),this.frameINFO[b].onFrame=no0p,this.frameINFO[b].x=c,this.frameINFO[b].y=d,this.frameINFO[b].width=this.bitmap.width/a.wide,this.frameINFO[b].height=this.bitmap.height/a.tall,this.frameINFO[b].regX=a.regX||this.frameINFO[b].regX||0,this.frameINFO[b].regY=a.regY||this.frameINFO[b].regY||0;else for(let b=0;b<a.wide*a.tall;b++)c=b%a.wide*(this.bitmap.width/a.wide),d=Math.Floor(b/a.wide)*(this.bitmap.height/a.tall),this.frameINFO[b]||(this.frameINFO[b]={}),this.frameINFO[b].x=this.frameINFO[b].x||c,this.frameINFO[b].y=this.frameINFO[b].y||d,this.frameINFO[b].width=this.frameINFO[b].width||this.bitmap.width/a.wide,this.frameINFO[b].height=this.frameINFO[b].height||this.bitmap.height/a.tall,this.frameINFO[b].regX=this.frameINFO[b].regX||a.regX||0,this.frameINFO[b].regY=this.frameINFO[b].regY||a.regY||0}},editFrame:function(a,b){this.frameINFO[a].onFrame=b.onFrame||this.frameINFO[a].onFrame||no0p,this.frameINFO[a].x=b.x||this.frameINFO[a].x||0,this.frameINFO[a].y=b.y||this.frameINFO[a].y||0,this.frameINFO[a].width=b.width||this.frameINFO[a].width||0,this.frameINFO[a].height=b.height||this.frameINFO[a].height||0,this.frameINFO[a].regX=b.regX||this.frameINFO[a].regX||0,this.frameINFO[a].regY=b.regY||this.frameINFO[a].regY||0}}}(),function(){"use strict";var a=function(){this.init()};a.prototype={init:function(){var a=this||b;return a._codecs={},a._howls=[],a._muted=!1,a._volume=1,a._canPlayEvent="canplaythrough",a._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,a.masterGain=null,a.noAudio=!1,a.usingWebAudio=!0,a.autoSuspend=!0,a.ctx=null,a.mobileAutoEnable=!0,a._setup(),a},volume:function(a){var c=this||b;if(a=parseFloat(a),c.ctx||j(),"undefined"!=typeof a&&a>=0&&a<=1){if(c._volume=a,c._muted)return c;c.usingWebAudio&&(c.masterGain.gain.value=a);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var e=c._howls[d]._getSoundIds(),f=0;f<e.length;f++){var g=c._howls[d]._soundById(e[f]);g&&g._node&&(g._node.volume=g._volume*a)}return c}return c._volume},mute:function(a){var c=this||b;c.ctx||j(),c._muted=a,c.usingWebAudio&&(c.masterGain.gain.value=a?0:c._volume);for(var d=0;d<c._howls.length;d++)if(!c._howls[d]._webAudio)for(var e=c._howls[d]._getSoundIds(),f=0;f<e.length;f++){var g=c._howls[d]._soundById(e[f]);g&&g._node&&(g._node.muted=!!a||g._muted)}return c},unload:function(){for(var a=this||b,c=a._howls.length-1;c>=0;c--)a._howls[c].unload();return a.usingWebAudio&&"undefined"!=typeof a.ctx.close&&(a.ctx.close(),a.ctx=null,j()),a},codecs:function(a){return(this||b)._codecs[a.replace(/^x-/,"")]},_setup:function(){var a=this||b;return a.state=a.ctx?a.ctx.state||"running":"running",a._autoSuspend(),a.noAudio||a._setupCodecs(),a},_setupCodecs:function(){var a=this||b,c="undefined"!=typeof Audio?new Audio:null;if(!c||"function"!=typeof c.canPlayType)return a;var d=c.canPlayType("audio/mpeg;").replace(/^no$/,""),e=a._navigator&&a._navigator.userAgent.match(/OPR\/([0-6].)/g),f=e&&parseInt(e[0].split("/")[1],10)<33;return a._codecs={mp3:!(f||!d&&!c.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!d,opus:!!c.canPlayType('audio/ogg; codecs="opus"').replace(/^no$/,""),ogg:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),oga:!!c.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),wav:!!c.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),aac:!!c.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!c.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(c.canPlayType("audio/x-m4a;")||c.canPlayType("audio/m4a;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(c.canPlayType("audio/x-mp4;")||c.canPlayType("audio/mp4;")||c.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),webm:!!c.canPlayType('audio/webm; codecs="vorbis"').replace(/^no$/,""),dolby:!!c.canPlayType('audio/mp4; codecs="ec-3"').replace(/^no$/,""),flac:!!(c.canPlayType("audio/x-flac;")||c.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_enableMobileAudio:function(){var a=this||b,c=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(a._navigator&&a._navigator.userAgent),d=!!("ontouchend"in window||a._navigator&&a._navigator.maxTouchPoints>0||a._navigator&&a._navigator.msMaxTouchPoints>0);if(!a._mobileEnabled&&a.ctx&&(c||d)){a._mobileEnabled=!1,a._mobileUnloaded||44100===a.ctx.sampleRate||(a._mobileUnloaded=!0,a.unload()),a._scratchBuffer=a.ctx.createBuffer(1,1,22050);var e=function(){var b=a.ctx.createBufferSource();b.buffer=a._scratchBuffer,b.connect(a.ctx.destination),"undefined"==typeof b.start?b.noteOn(0):b.start(0),b.onended=function(){b.disconnect(0),a._mobileEnabled=!0,a.mobileAutoEnable=!1,document.removeEventListener("touchend",e,!0)}};return document.addEventListener("touchend",e,!0),a}},_autoSuspend:function(){var a=this;if(a.autoSuspend&&a.ctx&&"undefined"!=typeof a.ctx.suspend&&b.usingWebAudio){for(var c=0;c<a._howls.length;c++)if(a._howls[c]._webAudio)for(var d=0;d<a._howls[c]._sounds.length;d++)if(!a._howls[c]._sounds[d]._paused)return a;return a._suspendTimer&&clearTimeout(a._suspendTimer),a._suspendTimer=setTimeout(function(){a.autoSuspend&&(a._suspendTimer=null,a.state="suspending",a.ctx.suspend().then(function(){a.state="suspended",a._resumeAfterSuspend&&(delete a._resumeAfterSuspend,a._autoResume())}))},3e4),a}},_autoResume:function(){var a=this;if(a.ctx&&"undefined"!=typeof a.ctx.resume&&b.usingWebAudio)return"running"===a.state&&a._suspendTimer?(clearTimeout(a._suspendTimer),a._suspendTimer=null):"suspended"===a.state?(a.state="resuming",a.ctx.resume().then(function(){a.state="running"}),a._suspendTimer&&(clearTimeout(a._suspendTimer),a._suspendTimer=null)):"suspending"===a.state&&(a._resumeAfterSuspend=!0),a}};var b=new a,c=function(a){var b=this;return a.src&&0!==a.src.length?void b.init(a):void console.error("An array of source files must be passed with any new Howl.")};c.prototype={init:function(a){var c=this;return b.ctx||j(),c._autoplay=a.autoplay||!1,c._format="string"!=typeof a.format?a.format:[a.format],c._html5=a.html5||!1,c._muted=a.mute||!1,c._loop=a.loop||!1,c._pool=a.pool||5,c._preload="boolean"!=typeof a.preload||a.preload,c._rate=a.rate||1,c._sprite=a.sprite||{},c._src="string"!=typeof a.src?a.src:[a.src],c._volume=void 0!==a.volume?a.volume:1,c._duration=0,c._state="unloaded",c._sounds=[],c._endTimers={},c._queue=[],HYPER.Preload.load++,c.onloadTry=function(){HYPER.Preload.loaded++,a.onload&&a.onload()},c._onend=a.onend?[{fn:a.onend}]:[],c._onfade=a.onfade?[{fn:a.onfade}]:[],c._onload=c.onloadTry,c._onloaderror=a.onloaderror?[{fn:a.onloaderror}]:[],c._onpause=a.onpause?[{fn:a.onpause}]:[],c._onplay=a.onplay?[{fn:a.onplay}]:[],c._onstop=a.onstop?[{fn:a.onstop}]:[],c._onmute=a.onmute?[{fn:a.onmute}]:[],c._onvolume=a.onvolume?[{fn:a.onvolume}]:[],c._onrate=a.onrate?[{fn:a.onrate}]:[],c._onseek=a.onseek?[{fn:a.onseek}]:[],c._webAudio=b.usingWebAudio&&!c._html5,"undefined"!=typeof b.ctx&&b.ctx&&b.mobileAutoEnable&&b._enableMobileAudio(),b._howls.push(c),c._preload&&c.load(),c},load:function(){var a=this,c=null;if(b.noAudio)return void a._emit("loaderror",null,"No audio support.");"string"==typeof a._src&&(a._src=[a._src]);for(var e=0;e<a._src.length;e++){var g,h;if(a._format&&a._format[e])g=a._format[e];else{if(h=a._src[e],"string"!=typeof h){a._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}g=/^data:audio\/([^;,]+);/i.exec(h),g||(g=/\.([^.]+)$/.exec(h.split("?",1)[0])),g&&(g=g[1].toLowerCase())}if(b.codecs(g)){c=a._src[e];break}}return c?(a._src=c,a._state="loading","https:"===window.location.protocol&&"http:"===c.slice(0,5)&&(a._html5=!0,a._webAudio=!1),new d(a),a._webAudio&&f(a),a):void a._emit("loaderror",null,"No codec support for selected audio sources.")},play:function(a,c){var d=this,e=null;if("number"==typeof a)e=a,a=null;else{if("string"==typeof a&&"loaded"===d._state&&!d._sprite[a])return null;if("undefined"==typeof a){a="__default";for(var f=0,g=0;g<d._sounds.length;g++)d._sounds[g]._paused&&!d._sounds[g]._ended&&(f++,e=d._sounds[g]._id);1===f?a=null:e=null}}var h=e?d._soundById(e):d._inactiveSound();if(!h)return null;if(e&&!a&&(a=h._sprite||"__default"),"loaded"!==d._state&&!d._sprite[a])return d._queue.push({event:"play",action:function(){d.play(d._soundById(h._id)?h._id:void 0)}}),h._id;if(e&&!h._paused)return c||setTimeout(function(){d._emit("play",h._id)},0),h._id;d._webAudio&&b._autoResume();var i=h._seek>0?h._seek:d._sprite[a][0]/1e3,j=(d._sprite[a][0]+d._sprite[a][1])/1e3-i,k=1e3*j/Math.abs(h._rate);h._paused=!1,h._ended=!1,h._sprite=a,h._seek=i,h._start=d._sprite[a][0]/1e3,h._stop=(d._sprite[a][0]+d._sprite[a][1])/1e3,h._loop=!(!h._loop&&!d._sprite[a][2]);var l=h._node;if(d._webAudio){var m=function(){d._refreshBuffer(h);var a=h._muted||d._muted?0:h._volume;l.gain.setValueAtTime(a,b.ctx.currentTime),h._playStart=b.ctx.currentTime,"undefined"==typeof l.bufferSource.start?h._loop?l.bufferSource.noteGrainOn(0,i,86400):l.bufferSource.noteGrainOn(0,i,j):h._loop?l.bufferSource.start(0,i,86400):l.bufferSource.start(0,i,j),k!==1/0&&(d._endTimers[h._id]=setTimeout(d._ended.bind(d,h),k)),c||setTimeout(function(){d._emit("play",h._id)},0)};"loaded"===d._state?m():(d.once("load",m,h._id),d._clearTimer(h._id))}else{var n=function(){l.currentTime=i,l.muted=h._muted||d._muted||b._muted||l.muted,l.volume=h._volume*b.volume(),l.playbackRate=h._rate,setTimeout(function(){l.play(),k!==1/0&&(d._endTimers[h._id]=setTimeout(d._ended.bind(d,h),k)),c||d._emit("play",h._id)},0)},o="loaded"===d._state&&(window&&window.ejecta||!l.readyState&&b._navigator.isCocoonJS);if(4===l.readyState||o)n();else{var p=function(){n(),l.removeEventListener(b._canPlayEvent,p,!1)};l.addEventListener(b._canPlayEvent,p,!1),d._clearTimer(h._id)}}return h._id},pause:function(a){var b=this;if("loaded"!==b._state)return b._queue.push({event:"pause",action:function(){b.pause(a)}}),b;for(var c=b._getSoundIds(a),d=0;d<c.length;d++){b._clearTimer(c[d]);var e=b._soundById(c[d]);if(e&&!e._paused){if(e._seek=b.seek(c[d]),e._rateSeek=0,e._paused=!0,b._stopFade(c[d]),e._node)if(b._webAudio){if(!e._node.bufferSource)return b;"undefined"==typeof e._node.bufferSource.stop?e._node.bufferSource.noteOff(0):e._node.bufferSource.stop(0),b._cleanBuffer(e._node)}else isNaN(e._node.duration)&&e._node.duration!==1/0||e._node.pause();arguments[1]||b._emit("pause",e._id)}}return b},stop:function(a,b){var c=this;if("loaded"!==c._state)return c._queue.push({event:"stop",action:function(){c.stop(a)}}),c;for(var d=c._getSoundIds(a),e=0;e<d.length;e++){c._clearTimer(d[e]);var f=c._soundById(d[e]);if(f&&(f._seek=f._start||0,f._rateSeek=0,f._paused=!0,f._ended=!0,c._stopFade(d[e]),f._node))if(c._webAudio){if(!f._node.bufferSource)return b||c._emit("stop",f._id),c;"undefined"==typeof f._node.bufferSource.stop?f._node.bufferSource.noteOff(0):f._node.bufferSource.stop(0),c._cleanBuffer(f._node)}else isNaN(f._node.duration)&&f._node.duration!==1/0||(f._node.currentTime=f._start||0,f._node.pause());f&&!b&&c._emit("stop",f._id)}return c},mute:function(a,c){var d=this;if("loaded"!==d._state)return d._queue.push({event:"mute",action:function(){d.mute(a,c)}}),d;if("undefined"==typeof c){if("boolean"!=typeof a)return d._muted;d._muted=a}for(var e=d._getSoundIds(c),f=0;f<e.length;f++){var g=d._soundById(e[f]);g&&(g._muted=a,d._webAudio&&g._node?g._node.gain.setValueAtTime(a?0:g._volume,b.ctx.currentTime):g._node&&(g._node.muted=!!b._muted||a),d._emit("mute",g._id))}return d},volume:function(){var d,e,a=this,c=arguments;if(0===c.length)return a._volume;if(1===c.length||2===c.length&&"undefined"==typeof c[1]){var f=a._getSoundIds(),g=f.indexOf(c[0]);g>=0?e=parseInt(c[0],10):d=parseFloat(c[0])}else c.length>=2&&(d=parseFloat(c[0]),e=parseInt(c[1],10));var h;if(!("undefined"!=typeof d&&d>=0&&d<=1))return h=e?a._soundById(e):a._sounds[0],
h?h._volume:0;if("loaded"!==a._state)return a._queue.push({event:"volume",action:function(){a.volume.apply(a,c)}}),a;"undefined"==typeof e&&(a._volume=d),e=a._getSoundIds(e);for(var i=0;i<e.length;i++)h=a._soundById(e[i]),h&&(h._volume=d,c[2]||a._stopFade(e[i]),a._webAudio&&h._node&&!h._muted?h._node.gain.setValueAtTime(d,b.ctx.currentTime):h._node&&!h._muted&&(h._node.volume=d*b.volume()),a._emit("volume",h._id));return a},fade:function(a,c,d,e){var f=this,g=Math.abs(a-c),h=a>c?"out":"in",i=g/.01,j=i>0?d/i:d;if("loaded"!==f._state)return f._queue.push({event:"fade",action:function(){f.fade(a,c,d,e)}}),f;f.volume(a,e);for(var k=f._getSoundIds(e),l=0;l<k.length;l++){var m=f._soundById(k[l]);if(m){if(e||f._stopFade(k[l]),f._webAudio&&!m._muted){var n=b.ctx.currentTime,o=n+d/1e3;m._volume=a,m._node.gain.setValueAtTime(a,n),m._node.gain.linearRampToValueAtTime(c,o)}var p=a;m._interval=setInterval(function(a,b){i>0&&(p+="in"===h?.01:-.01),p=Math.max(0,p),p=Math.min(1,p),p=Math.round(100*p)/100,f._webAudio?("undefined"==typeof e&&(f._volume=p),b._volume=p):f.volume(p,a,!0),p===c&&(clearInterval(b._interval),b._interval=null,f.volume(p,a),f._emit("fade",a))}.bind(f,k[l],m),j)}}return f},_stopFade:function(a){var c=this,d=c._soundById(a);return d&&d._interval&&(c._webAudio&&d._node.gain.cancelScheduledValues(b.ctx.currentTime),clearInterval(d._interval),d._interval=null,c._emit("fade",a)),c},loop:function(){var c,d,e,a=this,b=arguments;if(0===b.length)return a._loop;if(1===b.length){if("boolean"!=typeof b[0])return e=a._soundById(parseInt(b[0],10)),!!e&&e._loop;c=b[0],a._loop=c}else 2===b.length&&(c=b[0],d=parseInt(b[1],10));for(var f=a._getSoundIds(d),g=0;g<f.length;g++)e=a._soundById(f[g]),e&&(e._loop=c,a._webAudio&&e._node&&e._node.bufferSource&&(e._node.bufferSource.loop=c));return a},rate:function(){var d,e,a=this,c=arguments;if(0===c.length)e=a._sounds[0]._id;else if(1===c.length){var f=a._getSoundIds(),g=f.indexOf(c[0]);g>=0?e=parseInt(c[0],10):d=parseFloat(c[0])}else 2===c.length&&(d=parseFloat(c[0]),e=parseInt(c[1],10));var h;if("number"!=typeof d)return h=a._soundById(e),h?h._rate:a._rate;if("loaded"!==a._state)return a._queue.push({event:"rate",action:function(){a.rate.apply(a,c)}}),a;"undefined"==typeof e&&(a._rate=d),e=a._getSoundIds(e);for(var i=0;i<e.length;i++)if(h=a._soundById(e[i])){h._rateSeek=a.seek(e[i]),h._playStart=a._webAudio?b.ctx.currentTime:h._playStart,h._rate=d,a._webAudio&&h._node&&h._node.bufferSource?h._node.bufferSource.playbackRate.value=d:h._node&&(h._node.playbackRate=d);var j=a.seek(e[i]),k=(a._sprite[h._sprite][0]+a._sprite[h._sprite][1])/1e3-j,l=1e3*k/Math.abs(h._rate);!a._endTimers[e[i]]&&h._paused||(a._clearTimer(e[i]),a._endTimers[e[i]]=setTimeout(a._ended.bind(a,h),l)),a._emit("rate",h._id)}return a},seek:function(){var d,e,a=this,c=arguments;if(0===c.length)e=a._sounds[0]._id;else if(1===c.length){var f=a._getSoundIds(),g=f.indexOf(c[0]);g>=0?e=parseInt(c[0],10):(e=a._sounds[0]._id,d=parseFloat(c[0]))}else 2===c.length&&(d=parseFloat(c[0]),e=parseInt(c[1],10));if("undefined"==typeof e)return a;if("loaded"!==a._state)return a._queue.push({event:"seek",action:function(){a.seek.apply(a,c)}}),a;var h=a._soundById(e);if(h){if(!("number"==typeof d&&d>=0)){if(a._webAudio){var j=a.playing(e)?b.ctx.currentTime-h._playStart:0,k=h._rateSeek?h._rateSeek-h._seek:0;return h._seek+(k+j*Math.abs(h._rate))}return h._node.currentTime}var i=a.playing(e);i&&a.pause(e,!0),h._seek=d,h._ended=!1,a._clearTimer(e),i&&a.play(e,!0),!a._webAudio&&h._node&&(h._node.currentTime=d),a._emit("seek",e)}return a},playing:function(a){var b=this;if("number"==typeof a){var c=b._soundById(a);return!!c&&!c._paused}for(var d=0;d<b._sounds.length;d++)if(!b._sounds[d]._paused)return!0;return!1},duration:function(a){var b=this,c=b._duration,d=b._soundById(a);return d&&(c=b._sprite[d._sprite][1]/1e3),c},state:function(){return this._state},unload:function(){for(var a=this,c=a._sounds,d=0;d<c.length;d++){c[d]._paused||(a.stop(c[d]._id),a._emit("end",c[d]._id)),a._webAudio||(c[d]._node.src="data:audio/wav;base64,UklGRiQAAABXQVZFZm10IBAAAAABAAEARKwAAIhYAQACABAAZGF0YQAAAAA=",c[d]._node.removeEventListener("error",c[d]._errorFn,!1),c[d]._node.removeEventListener(b._canPlayEvent,c[d]._loadFn,!1)),delete c[d]._node,a._clearTimer(c[d]._id);var f=b._howls.indexOf(a);f>=0&&b._howls.splice(f,1)}var g=!0;for(d=0;d<b._howls.length;d++)if(b._howls[d]._src===a._src){g=!1;break}return e&&g&&delete e[a._src],a._state="unloaded",a._sounds=[],a=null,null},on:function(a,b,c,d){var e=this,f=e["_on"+a];return"function"==typeof b&&f.push(d?{id:c,fn:b,once:d}:{id:c,fn:b}),e},off:function(a,b,c){var d=this,e=d["_on"+a],f=0;if(b){for(f=0;f<e.length;f++)if(b===e[f].fn&&c===e[f].id){e.splice(f,1);break}}else if(a)d["_on"+a]=[];else{var g=Object.keys(d);for(f=0;f<g.length;f++)0===g[f].indexOf("_on")&&Array.isArray(d[g[f]])&&(d[g[f]]=[])}return d},once:function(a,b,c){var d=this;return d.on(a,b,c,1),d},_emit:function(a,b,c){for(var d=this,e=d["_on"+a],f=e.length-1;f>=0;f--)e[f].id&&e[f].id!==b&&"load"!==a||(setTimeout(function(a){a.call(this,b,c)}.bind(d,e[f].fn),0),e[f].once&&d.off(a,e[f].fn,e[f].id));return d},_loadQueue:function(){var a=this;if(a._queue.length>0){var b=a._queue[0];a.once(b.event,function(){a._queue.shift(),a._loadQueue()}),b.action()}return a},_ended:function(a){var c=this,d=a._sprite,e=!(!a._loop&&!c._sprite[d][2]);if(c._emit("end",a._id),!c._webAudio&&e&&c.stop(a._id,!0).play(a._id),c._webAudio&&e){c._emit("play",a._id),a._seek=a._start||0,a._rateSeek=0,a._playStart=b.ctx.currentTime;var f=1e3*(a._stop-a._start)/Math.abs(a._rate);c._endTimers[a._id]=setTimeout(c._ended.bind(c,a),f)}return c._webAudio&&!e&&(a._paused=!0,a._ended=!0,a._seek=a._start||0,a._rateSeek=0,c._clearTimer(a._id),c._cleanBuffer(a._node),b._autoSuspend()),c._webAudio||e||c.stop(a._id),c},_clearTimer:function(a){var b=this;return b._endTimers[a]&&(clearTimeout(b._endTimers[a]),delete b._endTimers[a]),b},_soundById:function(a){for(var b=this,c=0;c<b._sounds.length;c++)if(a===b._sounds[c]._id)return b._sounds[c];return null},_inactiveSound:function(){var a=this;a._drain();for(var b=0;b<a._sounds.length;b++)if(a._sounds[b]._ended)return a._sounds[b].reset();return new d(a)},_drain:function(){var a=this,b=a._pool,c=0,d=0;if(!(a._sounds.length<b)){for(d=0;d<a._sounds.length;d++)a._sounds[d]._ended&&c++;for(d=a._sounds.length-1;d>=0;d--){if(c<=b)return;a._sounds[d]._ended&&(a._webAudio&&a._sounds[d]._node&&a._sounds[d]._node.disconnect(0),a._sounds.splice(d,1),c--)}}},_getSoundIds:function(a){var b=this;if("undefined"==typeof a){for(var c=[],d=0;d<b._sounds.length;d++)c.push(b._sounds[d]._id);return c}return[a]},_refreshBuffer:function(a){var c=this;return a._node.bufferSource=b.ctx.createBufferSource(),a._node.bufferSource.buffer=e[c._src],a._panner?a._node.bufferSource.connect(a._panner):a._node.bufferSource.connect(a._node),a._node.bufferSource.loop=a._loop,a._loop&&(a._node.bufferSource.loopStart=a._start||0,a._node.bufferSource.loopEnd=a._stop),a._node.bufferSource.playbackRate.value=a._rate,c},_cleanBuffer:function(a){var b=this;if(b._scratchBuffer){a.bufferSource.onended=null,a.bufferSource.disconnect(0);try{a.bufferSource.buffer=b._scratchBuffer}catch(a){}}return a.bufferSource=null,b}};var d=function(a){this._parent=a,this.init()};d.prototype={init:function(){var a=this,b=a._parent;return a._muted=b._muted,a._loop=b._loop,a._volume=b._volume,a._muted=b._muted,a._rate=b._rate,a._seek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=Math.round(Date.now()*Math.random()),b._sounds.push(a),a.create(),a},create:function(){var a=this,c=a._parent,d=b._muted||a._muted||a._parent._muted?0:a._volume;return c._webAudio?(a._node="undefined"==typeof b.ctx.createGain?b.ctx.createGainNode():b.ctx.createGain(),a._node.gain.setValueAtTime(d,b.ctx.currentTime),a._node.paused=!0,a._node.connect(b.masterGain)):(a._node=new Audio,a._errorFn=a._errorListener.bind(a),a._node.addEventListener("error",a._errorFn,!1),a._loadFn=a._loadListener.bind(a),a._node.addEventListener(b._canPlayEvent,a._loadFn,!1),a._node.src=c._src,a._node.preload="auto",a._node.volume=d*b.volume(),a._node.load()),a},reset:function(){var a=this,b=a._parent;return a._muted=b._muted,a._loop=b._loop,a._volume=b._volume,a._muted=b._muted,a._rate=b._rate,a._seek=0,a._rateSeek=0,a._paused=!0,a._ended=!0,a._sprite="__default",a._id=Math.round(Date.now()*Math.random()),a},_errorListener:function(){var a=this;a._node.error&&4===a._node.error.code&&(b.noAudio=!0),a._parent._emit("loaderror",a._id,a._node.error?a._node.error.code:0),a._node.removeEventListener("error",a._errorListener,!1)},_loadListener:function(){var a=this,c=a._parent;c._duration=Math.ceil(10*a._node.duration)/10,0===Object.keys(c._sprite).length&&(c._sprite={__default:[0,1e3*c._duration]}),"loaded"!==c._state&&(c._state="loaded",c._emit("load"),c._loadQueue()),c._autoplay&&c.play(),a._node.removeEventListener(b._canPlayEvent,a._loadFn,!1)}};var e={},f=function(a){var b=a._src;if(e[b])return a._duration=e[b].duration,void i(a);if(/^data:[^;]+;base64,/.test(b)){for(var c=atob(b.split(",")[1]),d=new Uint8Array(c.length),f=0;f<c.length;++f)d[f]=c.charCodeAt(f);h(d.buffer,a)}else{var j=new XMLHttpRequest;j.open("GET",b,!0),j.responseType="arraybuffer",j.onload=function(){var b=(j.status+"")[0];return"0"!==b&&"2"!==b&&"3"!==b?void a._emit("loaderror",null,"Failed loading audio file with status: "+j.status+"."):void h(j.response,a)},j.onerror=function(){a._webAudio&&(a._html5=!0,a._webAudio=!1,a._sounds=[],delete e[b],a.load())},g(j)}},g=function(a){try{a.send()}catch(b){a.onerror()}},h=function(a,c){b.ctx.decodeAudioData(a,function(a){a&&c._sounds.length>0&&(e[c._src]=a,i(c,a))},function(){c._emit("loaderror",null,"Decoding audio data failed.")})},i=function(a,b){b&&!a._duration&&(a._duration=b.duration),0===Object.keys(a._sprite).length&&(a._sprite={__default:[0,1e3*a._duration]}),"loaded"!==a._state&&(a._state="loaded",a._emit("load"),a._loadQueue()),a._autoplay&&a.play()},j=function(){b.noAudio=!1;try{"undefined"!=typeof AudioContext?b.ctx=new AudioContext:"undefined"!=typeof webkitAudioContext?b.ctx=new webkitAudioContext:b.usingWebAudio=!1}catch(a){b.usingWebAudio=!1}if(!b.usingWebAudio)if("undefined"!=typeof Audio)try{var a=new Audio;"undefined"==typeof a.oncanplaythrough&&(b._canPlayEvent="canplay")}catch(a){b.noAudio=!0}else b.noAudio=!0;try{var a=new Audio;a.muted&&(b.noAudio=!0)}catch(a){}var c=/iP(hone|od|ad)/.test(b._navigator&&b._navigator.platform),d=b._navigator&&b._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),e=d?parseInt(d[1],10):null;if(c&&e&&e<9){var f=/safari/.test(b._navigator&&b._navigator.userAgent.toLowerCase());(b._navigator&&b._navigator.standalone&&!f||b._navigator&&!b._navigator.standalone&&!f)&&(b.usingWebAudio=!1)}b.usingWebAudio&&(b.masterGain="undefined"==typeof b.ctx.createGain?b.ctx.createGainNode():b.ctx.createGain(),b.masterGain.gain.value=1,b.masterGain.connect(b.ctx.destination)),b._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:b,Howl:c}}),"undefined"!=typeof exports&&(exports.Howler=b,exports.Howl=c),HYPER.Preload.Audio=c,HYPER.Audio={},HYPER.Audio.HowlerGlobal=a,HYPER.Audio.Howler=b,HYPER.Audio.Howl=c,HYPER.Audio.Sound=d}(),function(){"use strict";HYPER.Physics={}}(),function(){"use strict";var a=0,b=0,c=0,d=0;HYPER.Physics.checkAABBCollision=function(a,b){var c={},d={};return c=a,d=b,c.x<=d.x+d.size.width&&c.x+c.size.width>=d.x&&c.y<=d.y+d.size.height&&c.y+c.size.height>d.y},HYPER.Physics.checkCircleCollision=function(a,b){return Math.sqrt((a.x-b.x)*(a.x-b.x)+(a.y-b.y)*(a.y-b.y))<a.size.radius+b.size.radius},HYPER.Physics.checkCircleAABBCollision=function(e,f){return a=Math.abs(e.x-f.x-f.size.width/2),b=Math.abs(e.y-f.y-f.size.height/2),!(a>f.size.width/2+e.size.radius)&&(!(b>f.size.height/2+e.size.radius)&&(a<=f.size.width/2||(b<=f.size.height/2||(c=a-f.size.width/2,d=b-f.size.height/2,c*c+d*d<=e.size.radius*e.size.radius))))},HYPER.Physics.checkPointAABBCollision=function(a,b){return a.x>=b.x&&a.x<=b.x+b.size.width&&a.y>=b.y&&a.y<=b.y+b.size.height},HYPER.Physics.checkPointCircleCollision=function(a,b){return Math.sqrt((b.x-a.x)*(b.x-a.x)+(b.y-a.y)*(b.y-a.y))<=b.size.radius},HYPER.Physics.checkPointPointCollision=function(a,b){return Math.floor(a.x)===Math.floor(b.x)&&Math.floor(b.x)===Math.floor(b.x)},HYPER.Physics.checkCollision=function(a,b){var c,d;if(a.size||(c="point"),"circle"===!a.shape&&(c="circle"),"rect"===!a.shape&&(c="rect"),b.size||(d="point"),"circle"===!b.shape&&(d="circle"),"rect"===!b.shape&&(d="rect"),"point"===c){if("point"===d)return HYPER.Physics.checkPointPointCollision(a,b);if("circle"===d)return HYPER.Physics.checkPointCircleCollision(a,b);if("rect"===d)return HYPER.Physics.checkPointAABBCollision(a,b)}if("rect"===c){if("rect"===d)return HYPER.Physics.checkAABBCollision(a,b);if("circle"===d)return HYPER.Physics.checkCircleAABBCollision(b,a);if("point"===d)return HYPER.Physics.checkPointAABBCollision(b,a)}if("circle"===c){if("rect"===d)return HYPER.Physics.checkCircleAABBCollision(a,b);if("circle"===d)return HYPER.Physics.checkCircleCircleCollision(b,a);if("point"===d)return HYPER.Physics.checkPointCircleCollision(b,a)}}}(),function(){"use strict";HYPER.Physics.Vector={},HYPER.Physics.Vector.create=function(a,b){return this.x=a||0,this.y=b||0,{x:this.x,y:this.y}},HYPER.Physics.Vector.clone=function(a){return this.x=a.x||0,this.y=a.y||0,{x:this.x,y:this.y}},HYPER.Physics.Vector.magnitude=function(a){return Math.sqrt(a.x*a.x+a.y*a.y)},HYPER.Physics.Vector.magnitudeSquared=function(a){return a.x*a.x+a.y*a.y},HYPER.Physics.Vector.rotate=function(a,b){var c=Math.cos(b),d=Math.sin(b);return{x:a.x*c-a.y*d,y:a.x*d+a.y*c}},HYPER.Physics.Vector.rotateAbout=function(a,b,c,d){var e=Math.cos(b),f=Math.sin(b);d||(d={});var g=c.x+((a.x-c.x)*e-(a.y-c.y)*f);return d.y=c.y+((a.x-c.x)*f+(a.y-c.y)*e),d.x=g,d},HYPER.Physics.Vector.normalise=function(a){var b=HYPER.Physics.Vector.magnitude(a);return 0===b?{x:0,y:0}:{x:a.x/b,y:a.y/b}},HYPER.Physics.Vector.dot=function(a,b){return a.x*b.x+a.y*b.y},HYPER.Physics.Vector.cross=function(a,b){return a.x*b.y-a.y*b.x},HYPER.Physics.Vector.cross3=function(a,b,c){return(b.x-a.x)*(c.y-a.y)-(b.y-a.y)*(c.x-a.x)},HYPER.Physics.Vector.add=function(a,b,c){return c||(c={}),c.x=a.x+b.x,c.y=a.y+b.y,c},HYPER.Physics.Vector.sub=function(a,b,c){return c||(c={}),c.x=a.x-b.x,c.y=a.y-b.y,c},HYPER.Physics.Vector.mult=function(a,b){return{x:a.x*b,y:a.y*b}},HYPER.Physics.Vector.div=function(a,b){return{x:a.x/b,y:a.y/b}},HYPER.Physics.Vector.perp=function(a,b){return b=b===!0?-1:1,{x:b*-a.y,y:b*a.x}},HYPER.Physics.Vector.neg=function(a){return{x:-a.x,y:-a.y}},HYPER.Physics.Vector.angle=function(a,b,c){return c===!0?HYPER.Math.RadiansToDegrees(Math.atan2(b.y-a.y,b.x-a.x)):Math.atan2(b.y-a.y,b.x-a.x)}}(),function(){"use strict";HYPER.Physics.BoxJS={},HYPER.Physics.BoxJS.Vector2=function(a,b){this.x=a,this.y=b},HYPER.Physics.BoxJS.Vector2.prototype={add:function(a){return new HYPER.Physics.BoxJS.Vector2(this.x+a.x,this.y+a.y)},sub:function(a){return new HYPER.Physics.BoxJS.Vector2(this.x-a.x,this.y-a.y)},dot:function(a){return this.x*a.x+this.y*a.y},cross:function(a){return this.x*a.y-this.y*a.x},div:function(a){return this.x/=a,this.y/=a,this},mul:function(a){return this.x*=a,this.y*=a,this},normalize:function(){var a=this.length();if(this.length>1e-4){var b=1/a;this.x*=b,this.y*=b}},lengthSqr:function(){return this.x*this.x+this.y*this.y},length:function(){return Math.sqrt(this.x*this.x+this.y*this.y)}},HYPER.Physics.BoxJS.material=function(a){a=a||{},this._ID="material "+Math.random()+Math.random(),this.type="material",this.fixed=a.fixed||!1,this.restitution=a.restitution||.1,this.staticFriction=a.staticFriction||1,this.dynamicFriction=a.dynamicFriction||.3,this.dontCollideWith=a.dontCollideWith||[],this.name=a.name||"material number: "+math.random()};var a=new HYPER.Physics.BoxJS.material({name:"DEFAULT_MATERIAL"});HYPER.Physics.BoxJS.Box=function(b){b=b||{},b.mass=b.mass||1,b.maxVel=b.maxVel||{},b.material?"material"===b.material.type&&(this.material=b.material):this.material=a,this.mass=void 0!==b.mass?b.mass:1,this.active=!0,this.isSleeping=!1,this.sleepCounter=0,this.type="boxJSAABB",this._ID="boxJSAABB "+Math.random()+Math.random(),this.immovable=b.fixed||!1,this.oldPos=new HYPER.Physics.BoxJS.Vector2(0,0),this.center=new HYPER.Physics.BoxJS.Vector2(b.width/2||16,b.height/2||16),this.im=0===b.mass?0:1/b.mass,this.restitution=.1,this.staticFriction=1,this.dynamicFriction=.3,this.maxVel=new HYPER.Physics.BoxJS.Vector2(b.maxVel.x||1e3,b.maxVel.y||1e3),this.pos=new HYPER.Physics.BoxJS.Vector2(b.x,b.y),this.vel=new HYPER.Physics.BoxJS.Vector2(0,0),this.acc=new HYPER.Physics.BoxJS.Vector2(0,0),this.sleepThreshold=b.sleepThreshold||1,this.size={width:b.width,height:b.height},this.fixed=b.fixed||!1,this.force=new HYPER.Physics.BoxJS.Vector2(0,0),this.min=new HYPER.Physics.BoxJS.Vector2(0,0),this.max=new HYPER.Physics.BoxJS.Vector2(0,0)},HYPER.Physics.BoxJS.Box.prototype={updateMaterial:function(){this.restitution=this.material.restitution,this.fixed=this.fixed||this.material.fixed,this.staticFriction=this.material.staticFriction,this.dynamicFriction=this.material.dynamicFriction},isOverlapping:function(a){return"boxJSAABB"===a.type?!(this.max.x<a.min.x||this.min.x>a.max.x)&&!(this.max.y<a.min.y||this.min.y>a.max.y):a.x&&a.y&&a.width&&a.height?this.min.x<=rect2.x+rect2.width&&this.max.x>=rect2.x&&this.min.y<=rect2.y+rect2.height&&this.max.x>rect2.y:"boxJSParticle"===a.type&&(a.pos.x>this.min.x&&a.pos.x<this.max.x&&a.pos.y>this.min.y&&a.pos.y<this.max.y||void 0)},updateSleeping:function(a){a?(this.speed<=this.sleepThreshold?this.sleepCounter++:this.speed>this.sleepThreshold&&(this.isSleeping=!1,this.sleepCounter=0),0===this.force.x&&0===this.force.y||(this.sleepCounter=0),this.sleepCounter>=100?this.isSleeping=!0:this.isSleeping=!1):(this.isSleeping=!1,this.sleepCounter=0),this.active||(this.sleepCounter=0),(this.fixed||0===this.im)&&(this.isSleeping=!0,this.sleepCounter=201)},setSleeping:function(a){a===!1?(this.isSleeping=!1,this.sleepCounter=0):(this.isSleeping=!0,this.sleepCounter=201)},updateBounds:function(){this.min.x=this.pos.x,this.max.x=this.pos.x+this.size.width,this.min.y=this.pos.y,this.max.y=this.pos.y+this.size.height,this.im=0===this.mass?0:1/this.mass,this.fixed&&(this.im=0)},integrateForces:function(a){0!==this.im&&!this.isSleeping&&this.active&&(this.vel.x+=this.acc.x,this.vel.y+=this.acc.y,this.vel.x+=(this.force.x*this.im+a.x)/2,this.vel.y+=(this.force.y*this.im+a.y)/2,this.angularVel+=this.angularAcc)},integratevel:function(a,b){this.isSleeping!==!0&&this.active?(this.vel.x>this.maxVel.x&&(this.vel.x=this.maxVel.x),this.vel.y>this.maxVel.y&&(this.vel.y=this.maxVel.y),0!==this.im&&(this.fixed||(this.pos.x+=this.vel.x,this.pos.y+=this.vel.y,this.angularPos+=this.angularVel))):(this.vel.x=0,this.vel.y=0),this.integrateForces(a,b),this.speed=Math.sqrt((this.pos.x-this.oldPos.x)*(this.pos.x-this.oldPos.x)+(this.pos.y-this.oldPos.y)*(this.pos.y-this.oldPos.y))},applyImpulse:function(a,b){!this.fixed&&this.active&&(this.vel.x+=this.im*a,this.vel.y+=this.im*b)},applyForce:function(a,b){!this.fixed&&this.active&&(this.force.x+=a,this.force.y+=b)},clearForces:function(){this.force.x=0,this.force.y=0}},HYPER.Physics.BoxJS.collideAABB=function(a,b,c,d){var e=Math.min(a.restitution||.1,b.restitution||.1),f=0,g=0,h=new HYPER.Physics.BoxJS.Vector2(0,0),i=0;f=Math.sqrt(a.staticFriction*b.staticFriction),g=Math.sqrt(a.dynamicFriction*b.dynamicFriction);var j=b.vel.x-a.vel.x,k=b.vel.y-a.vel.y;j*j+k*k<c.x*c.x+c.y*c.y+d&&(e=0);var l=a.pos.x+a.size.width/2-(b.pos.x+b.size.width/2),m=a.pos.y+a.size.height/2-(b.pos.y+b.size.height/2),n=(a.max.x-a.min.x)/2,o=(b.max.x-b.min.x)/2,p=(a.max.y-a.min.y)/2,q=(b.max.y-b.min.y)/2,r=!1,s=n+o-Math.abs(l);if(s){var t=p+q-Math.abs(m);t&&(s<t?(h.x=l<0?1:-1,h.y=0,i=s,r=!0):(h.x=0,h.y=m<0?1:-1,i=t,r=!0))}if(!r)return!1;var j=b.vel.x-a.vel.x,k=b.vel.y-a.vel.y,u=j*h.x+k*h.y;if(!(u>0)){var v=-(1+e)*u;v/=a.im+b.im,"boxJSParticle"!==b.type&&a.applyImpulse(-v*h.x,-v*h.y),"boxJSParticle"!==a.type&&b.applyImpulse(v*h.x,v*h.y);var w=j-h.x*u,x=k-h.y*u,y=Math.sqrt(w*w+x*x);y>d&&(w/=y,x/=y);var z=-(j*w+k*x);z/=a.im+b.im,Math.abs(z)<d,Math.abs(z)<v*f?(w*=z,x*=z):(w=w*-v*g,x=x*-v*g),"boxJSParticle"!==b.type&&a.applyImpulse(-w,-x),"boxJSParticle"!==a.type&&b.applyImpulse(w,x);var A=.7,B=.05,C=Math.max(i-B,0)/(a.im+b.im),D=C*h.x*A,E=C*h.y*A;a.isSleeping&&(Math.abs(D*a.im)>a.sleepThreshold/4||Math.abs(E*a.im)>a.sleepThreshold/4)&&(a.sleepCounter=0,a.isSleeping=!1),b.isSleeping&&(Math.abs(D*b.im)>b.sleepThreshold/4||Math.abs(E*b.im)>b.sleepThreshold/4)&&(b.sleepCounter=0,b.isSleeping=!1),a.pos.x-=D*a.im,a.pos.y-=E*a.im,b.pos.x+=D*b.im,b.pos.y+=E*b.im}},HYPER.Physics.BoxJS.collide=function(a,b,c,d){"boxJSAABB"===a.type&&"boxJSAABB"===b.type&&HYPER.Physics.BoxJS.collideAABB(a,b,c,d)};HYPER.Physics.BoxJS.Engine=function(a){a=a||{},a.gravity=a.gravity||{},this.zIndex=a.zIndex||0,this.iterations=10,this.gravity=new HYPER.Physics.BoxJS.Vector2(a.gravity.x||0,a.gravity.y||1),this.allowSleeping=a.allowSleeping||!1,this.contacts=[],this.contactsLength=0,this.bodies=[],this.length=0,this.debug=a.debug||!1,this.render=a.render||no0p,this.update=a.update||no0p,a.bounds=a.bounds||{},this.bounds={min:a.bounds.min||{x:-(1/0),y:-(1/0)},max:a.bounds.max||{x:1/0,y:1/0}}},HYPER.Physics.BoxJS.Engine.EPSILON=1e-4,HYPER.Physics.BoxJS.Engine.prototype={findCollisions:function(){for(var a=!1,b=0;b<this.bodies.length;b++)for(var c=this.bodies[b],d=b+1;d<this.bodies.length;d++){var e=this.bodies[d];c.active!==!1&&e.active!==!1||(a=!0),c.isSleeping!==!0||e.isSleeping!==!0||a||(a=!0),c.isSleeping&&e.fixed&&!a?a=!0:c.fixed&&e.isSleeping&&!a&&(a=!0),c.fixed&&e.fixed&&!a&&(a=!0),0!==c.im||0!==e.im||a||(a=!0);for(let b=0;b<e.material.dontCollideWith.length;b++)e.material.dontCollideWith[b]!==c.material.name||a||(a=!0);for(let b=0;b<c.material.dontCollideWith.length;b++)c.material.dontCollideWith[b]!==e.material.name||a||(a=!0);a?a=!1:c.isOverlapping(e)&&HYPER.Physics.BoxJS.collide(c,e,this.gravity,HYPER.Physics.BoxJS.Engine.EPSILON)}},integrateForces:function(){for(var a=0;a<this.bodies.length;a++)this.bodies[a].integrateForces(this.gravity)},integrateVelocities:function(){for(var a=0;a<this.bodies.length;a++)this.bodies[a].integratevel(this.gravity,this.allowSleeping),this.bodies[a].clearForces(),this.bodies[a].updateBounds(),this.bodies[a].updateMaterial()},_update:function(a){for(let b=0;b<this.bodies.length;b++)this.bodies[b].oldPos.x=this.bodies[b].pos.x,this.bodies[b].oldPos.y=this.bodies[b].pos.y;this.findCollisions(),this.integrateForces(),this.integrateVelocities();for(let b=0;b<this.bodies.length;b++)this.bodies[b].pos.x<this.bounds.min.x&&(this.bodies[b].pos.x=this.bounds.min.x),this.bodies[b].pos.y<this.bounds.min.y&&(this.bodies[b].pos.y=this.bounds.min.y),this.bodies[b].pos.x+this.bodies[b].size.width<this.bounds.min.x&&(this.bodies[b].pos.x=this.bounds.min.x-this.bodies[b].size.width),this.bodies[b].pos.y+this.bodies[b].size.height<this.bounds.min.y&&(this.bodies[b].pos.y=this.bounds.min.y-this.bodies[b].size.height),this.bodies[b].updateSleeping(this.allowSleeping);this.update()},_render:function(a){if(this.debug){HYPER.Graphics.styleToCTX(HYPER.Graphics.DEFAULT_STYLE,a.ctx);for(let b=0;b<this.bodies.length;b++)this.bodies[b].active&&(a.ctx.beginPath(),a.ctx.moveTo(this.bodies[b].min.x-a.camera.x,this.bodies[b].min.y-a.camera.y),a.ctx.lineTo(this.bodies[b].max.x-a.camera.x,this.bodies[b].min.y-a.camera.y),a.ctx.lineTo(this.bodies[b].max.x-a.camera.x,this.bodies[b].max.y-a.camera.y),a.ctx.lineTo(this.bodies[b].min.x-a.camera.x,this.bodies[b].max.y-a.camera.y),a.ctx.lineTo(this.bodies[b].min.x-a.camera.x,this.bodies[b].min.y-a.camera.y),a.ctx.moveTo((this.bodies[b].min.x+this.bodies[b].max.x)/2-a.camera.x,(this.bodies[b].min.y+this.bodies[b].max.y)/2-a.camera.y),a.ctx.lineTo(this.bodies[b].oldPos.x+this.bodies[b].size.width/2-a.camera.x,this.bodies[b].oldPos.y+this.bodies[b].size.height/2-a.camera.y),this.bodies[b].isSleeping&&this.allowSleeping?a.ctx.strokeStyle="#0000ff":a.ctx.strokeStyle="#ff0000",a.ctx.stroke())}this.render(a)},addBody:function(a){if("sprite"===a.type)this.bodies.push(a.body),this.length++;else if("group"===a.type){for(let b=0;b<a.group.length;b++)this.bodies.push(a.group[b].body),this.length++;a.physics="BoxAABB",a.world=this}else"boxJSAABB"===a.type&&(this.bodies.push(a),this.length++)},removeBody:function(a){for(let b=0;b<this.bodies.length;b++)this.bodies[b]===a&&(this.bodies.splice(b,1),this.length--)}},HYPER.Physics.BoxJS.enable=function(a,b){if("sprite"===a.type&&(b=b||{},b.x=b.x||a.x||0,b.y=b.y||a.y||0,b.width=b.width||a.width,b.height=b.height||a.height,b.center={x:a.rotX||b.width/2,y:a.rotY||b.height/2},b.angularPos=a.angle||0,a.body=new HYPER.Physics.BoxJS.Box(b)),"group"===a.type){for(let c=0;c<a.group.length;c++)b=b||{},b.x=b.x||a.group[c].x||0,b.y=b.y||a.group[c].y||0,b.width=b.width||a.group[c].width,b.height=b.height||a.group[c].height,b.center={x:a.group[c].rotX||b.width/2,y:a.group[c].rotY||b.height/2},b.angularPos=a.angle||0,a.group[c].body=new AABB(b);a.physics="BoxAABB"}}}(),function(){"use strict";HYPER.Particle={},HYPER.Particle.Particle=function(a){if("string"==typeof a.startColor){var b=a.startColor;a.startColor=[HYPER.Graphics.hexToRed(b),HYPER.Graphics.hexToGreen(b),HYPER.Graphics.hexToBlue(b),a.startAlpha||1]}if("string"==typeof a.endColor){var b=a.endColor;a.endColor=[HYPER.Graphics.hexToRed(b),HYPER.Graphics.hexToGreen(b),HYPER.Graphics.hexToBlue(b),a.endAlpha||1]}this._ID="particle "+Math.random()+Math.random(),this.style=a.style||HYPER.Graphics.DEFAULT_STYLE,this.x=a.x||0,this.y=a.y||0,this.startSize=a.startSize||a.size||10,this.endSize=a.endSize||a.size||0,this.startAlpha=a.startAlpha||0,this.endAlpha=a.endAlpha||0,this.startColor=a.startColor||[255,69,0,this.startAlpha],this.endColor=a.endColor||[70,70,70,this.endAlpha],this.angle=0,this.vel={x:0,y:0,angle:0},this.alive=a.alive||!1,this.lifeTime=a.lifeTime||100,this.lifeTimeTotal=a.lifeTimeTotal||a.lifeTime||100},HYPER.Particle.Particle.prototype={_update:function(a){this.alive&&(this.x-this.size>a.camera.x+a.camera.width||this.y-this.size>a.camera.y+a.camera.height||this.x+this.size<a.camera.x||this.y+this.size<a.camera.y||(this.x+=this.vel.x,this.y+=this.vel.y,this.angle+=this.vel.angle,this.lifeTime>0&&this.lifeTime--,this.lifeTime<=0&&(this.alive=!1)),this.lifeTime>0&&this.lifeTime--,this.lifeTime<=0&&(this.alive=!1))},_render:function(a,b,c){if(this.alive)if(b=b||{},c=c||this.style,this.x-this.size>a.camera.x+a.camera.width||this.y-this.size>a.camera.y+a.camera.height||this.x+this.size<a.camera.x||this.y+this.size<a.camera.y);else{var d=this.lifeTime/this.lifeTimeTotal,e=(this.startSize-this.endSize)*d+this.endSize,f=[Math.floor((this.startColor[0]-this.endColor[0])*d+this.endColor[0]),Math.floor((this.startColor[1]-this.endColor[1])*d+this.endColor[1]),Math.floor((this.startColor[2]-this.endColor[2])*d+this.endColor[2]),(this.startColor[3]-this.endColor[3])*d+this.endColor[3]],g="rgb("+f[0]+", "+f[1]+", "+f[2]+")",h=f[3]*c.alpha;"bitmap"===b.type?HYPER.Graphics.Draw(a.ctx,c).setFillColor(g).setStrokeColor(g).setAlpha(h).bitmap(b,this.x-b.width/2-a.camera.x,this.y-b.height/2-a.camera.y,this.size,b.height/this.width*this.size,0,0,b.width,b.height,this.angle,b.width/2,b.height/2):HYPER.Graphics.Draw(a.ctx,c).setFillColor(g).setStrokeColor(g).setAlpha(h).circle(this.x-a.camera.x,this.y-a.camera.y,e)}}},HYPER.Particle.Emitter=function(a){if(a=a||{},this._ID="emitter "+Math.random()+Math.random(),this.particles=[],this.texture=a.texture||{},this.x=a.x||0,this.y=a.y||0,this.width=a.width||this.texture.width||0,this.height=a.height||this.texture.height||0,this.lifeTime=a.lifeTime||100,this.lifeTimeTotal=a.lifeTimeTotal||a.lifeTime||100,this.style=a.style||HYPER.Graphics.DEFAULT_STYLE,this.fadeOut=a.fadeout||!1,this.maxParticles=a.maxParticles||1e3,this.startSize=a.startSize||a.size||10,this.endSize=a.endSize||a.size||0,this.startAlpha=a.startAlpha||a.alpha||this.style.alpha||0,this.endAlpha=a.endAlpha||a.alpha||this.style.alpha||0,this.render=a.render||no0p,this.update=a.update||no0p,this.locked=!1,this.lockedOffset={x:0,y:0},"string"==typeof a.startColor){var b=a.startColor;a.startColor=[HYPER.Graphics.hexToRed(b),HYPER.Graphics.hexToGreen(b),HYPER.Graphics.hexToBlue(b),this.startAlpha]}if("string"==typeof a.endColor){var b=a.endColor;a.endColor=[HYPER.Graphics.hexToRed(b),HYPER.Graphics.hexToGreen(b),HYPER.Graphics.hexToBlue(b),this.endAlpha]}this.startColor=a.startColor||[255,69,0,1],this.endColor=a.endColor||[70,70,70,0],this.gravity=a.gravity||{x:0,y:0};for(let c=0;c<this.maxParticles;c++)this.particles[c]=new HYPER.Particle.Particle({x:this.x,y:this.y,startSize:this.startSize,endSize:this.endSize,startColor:this.startColor,endColor:this.endColor,startAlpha:this.startAlpha,endAlpha:this.endAlpha,style:this.style,lifeTime:this.lifeTime,lifeTimeTotal:this.lifeTimeTotal})},HYPER.Particle.Emitter.prototype={emit:function(a,b,c,d){d=d||1;for(let e=0;e<this.particles.length;e++)if(!this.particles[e].alive){var f=HYPER.Math.degreesToRadians(HYPER.Math.random(a,b,!0));if(this.particles[e].alive=!0,this.particles[e].x=HYPER.Math.random(this.x,this.x+this.width),this.particles[e].y=HYPER.Math.random(this.y,this.y+this.height),this.particles[e].vel.x=Math.cos(f)*c,this.particles[e].vel.y=Math.sin(f)*c,this.particles[e].startSize=this.startSize,this.particles[e].endSize=this.endSize,this.particles[e].startColor=this.startColor,this.particles[e].endColor=this.endColor,this.particles[e].startAlpha=this.startAlpha,this.particles[e].endAlpha=this.endAlpha,this.particles[e].style=this.style,this.particles[e].lifeTime=this.lifeTime,this.particles[e].lifeTimeTotal=this.lifeTimeTotal,d--,d<=0)break}},setPos:function(a,b){this.x=a,this.y=b,"boxJSAABB"===this.body.type&&(this.body.pos.x=a,this.body.pos.y=b)},lockTo:function(a,b,c){a&&(this.locked=a,this.lockedOffset.x=b||0,this.lockedOffset.y=c||0)},unlock:function(){this.locked=!1,this.lockedOffset.x=0,this.lockedOffset.y=0},_update:function(a){for(let b=0;b<this.particles.length;b++)this.particles[b].alive&&(this.particles[b].vel.x+=this.gravity.x,this.particles[b].vel.y+=this.gravity.y,this.particles[b]._update(a));this.locked&&(this.setPos(this.locked.x+this.lockedOffset.x,this.locked.y+this.lockedOffset.y),this.body&&"boxJSAABB"===this.body.type&&(this.body.fixed=!0))},_render:function(a){for(let b=0;b<this.particles.length;b++)this.particles[b].alive&&this.particles[b]._render(a,this.texture,this.style);a.ctx.globalAlpha=1}}}(),function(){"use strict";HYPER.Group=function(a){a=a||{},this._ID="group "+Math.random()+Math.random(),this.texture=a.texture||{_render:no0p,_update:no0p,frames:{},bitmap:{},type:""},"animation"===this.texture.type,this.locked=!1,this.lockedOffset={x:0,y:0},"spritesheet"===this.texture.type&&(this.texture=new HYPER.Graphics.Animation({spriteSheet:this.texture})),this.texture.frames=this.texture.frames||{},this.texture.bitmap=this.texture.bitmap||{},this.type="group",this.style=a.style||HYPER.Graphics.DEFAULT_STYLE,this.zIndex=a.zIndex||0,this.x=a.x||0,this.y=a.y||0,this.width=a.width||this.texture.width||32,this.height=a.height||this.texture.height||32,this.angle=a.angle||0,this.rotX=a.rotX||this.width/2,this.rotY=a.rotY||this.height/2,this.visible=!0,this.active=!0,this.alive=!0,this.lifeTime=a.lifeTime||0,this.health=a.health||1,this.maxHealth=a.health||1,this.scaleX=a.scaleX||1,this.scaleY=a.scaleY||1,this.flippedX=a.flippedX||!1,this.flippedY=a.flippedY||!1,this.autoCull=a.autoCull||!1,this.render=a.render||no0p,this.update=a.update||no0p,this.onDeath=a.onDeath||no0p,this.onClick=a.onClick||no0p,this.onUp=a.onUp||no0p,this.onDown=a.onDown||no0p,this.onHold=a.onHold||no0p,this.onDblClick=a.onDblClick||no0p,this.onHover=a.onHover||no0p,this.group=[];
},HYPER.Group.prototype={create:function(a){a=a||{};var b=!1;for(let c=0;c<this.group.length;c++)if(!this.group[c].alive)return b=!0,this.group[c].texture=a.texture||this.texture,this.group[c].style=a.style||this.style,this.group[c].zIndex=a.zIndex||this.zIndex,this.group[c].x=a.x||this.x,this.group[c].y=a.y||this.x,this.group[c].width=a.width||this.width,this.group[c].height=a.height||this.height,this.group[c].angle=a.angle||this.angle,this.group[c].rotX=a.rotX||this.rotX,this.group[c].rotY=a.rotY||this.rotY,this.group[c].visible=!0,this.group[c].active=!0,this.group[c].alive=!0,this.group[c].lifeTime=a.lifeTime||this.lifeTime,this.group[c].health=a.health||this.health,this.group[c].maxHealth=a.health||this.maxHealth,this.group[c].scaleX=a.scaleX||this.scaleX,this.group[c].scaleY=a.scaleY||this.scaleY,this.group[c].flippedX=a.flippedX||this.flippedX,this.group[c].flippedY=a.flippedY||this.flippedY,this.group[c].autoCull=a.autoCull||this.autoCull,this.group[c].render=a.render||this.render,this.group[c].update=a.update||this.update,this.group[c].onDeath=a.onDeath||this.onDeath,this.group[c].onClick=a.onClick||this.onClick,this.group[c].onUp=a.onUp||this.onUp,this.group[c].onDown=a.onDown||this.onDown,this.group[c].onHold=a.onHold||this.onHold,this.group[c].onDblClick=a.onDblClick||this.onDblClick,this.group[c].onHover=a.onHover||this.onHover,this.group[c].revive(),this.group[c];if(!b){var d=this.group.push(new HYPER.Sprite({texture:a.texture||this.texture,style:a.style||this.style,zIndex:a.zIndex||this.zIndex,x:a.x||this.x,y:a.y||this.y,width:a.width||this.width,height:a.height||this.height,angle:a.angle||this.angle,rotX:a.rotX||this.rotX,rotY:a.rotY||this.rotY,lifeTime:a.lifeTime||this.lifeTime,health:a.health||this.health,maxHealth:a.health||this.maxHealth,scaleX:a.scaleX||this.scaleX,scaleY:a.scaleY||this.scaleY,flippedX:a.flippedX||this.flippedX,flippedY:a.flippedY||this.flippedY,autoCull:a.autoCull||this.autoCull,render:a.render||this.render,update:a.update||this.update,onDeath:a.onDeath||this.onDeath}));return"BoxAABB"===this.physics&&(HYPER.Physics.BoxJS.enable(this.group[d-1]),this.world.addBody(this.group[d-1])),this.group[d-1]}},_update:function(a){for(let b=0;b<this.group.length;b++)this.group[b].alive&&this.group[b]._update(a)},_render:function(a){for(let b=0;b<this.group.length;b++)this.group[b].alive&&this.group[b]._render(a)}}}(),function(){"use strict";HYPER.Screen=function(a){if(!a)return void console.error("No settings defined.");a.view=a.view||{},a.camera=a.camera||{};var b=this;this._ID="screen "+Math.random()+Math.random(),this.type="screen",this.canvas=document.getElementById(a.canvas),this.ctx=this.canvas.getContext("2d"),this.antiAliasing=a.antiAliasing||!1,this.autoClear=a.autoClear||!1,this.smartRendering=a.smartRendering||!1,this.motionBlur=a.motionBlur||!1,this.camera={x:a.camera.x||0,y:a.camera.y||0,width:a.camera.width||1280,height:a.camera.height||720},this.view={x:a.view.x||0,y:a.view.y||0,width:a.view.width||1280,height:a.view.height||720},this.passedINFO={},this.pointerDATA=[{},{},{},{},{},{},{},{},{},{}],this.render=a.render||no0p,this.update=a.update||no0p,this.currentState=a.currentState||{_init:no0p,_render:no0p,_update:no0p},this.onClick=a.onClick||no0p,this.onUp=a.onUp||no0p,this.onDown=a.onDown||no0p,this.onHold=a.onHold||no0p,this.onDblClick=a.onDblClick||no0p,this.onKeyUp=a.onKeyUp||no0p,this.onKeyDown=a.onKeyDown||no0p,this.onKeyHeld=a.onKeyHeld||no0p,this.showFPS=a.showFPS||!1,this._tick={FPS:a.tickFPS||a.tickfps||a.fps||30,_now:0,_then:Date.now(),_interval:33.33333333,_delta:0},this._anime={FPS:a.animeFPS||a.animefps||a.fps||60,_now:0,_then:Date.now(),_interval:16.66666666666666,_delta:0},this._looper=function(){b._update(),b._render()},HYPER.Input.addScreen(this)},HYPER.Screen.prototype={setTickFPS:function(a){this._tick.FPS=a,this._tick._interval=1e3/this._tick.FPS},setAnimeFPS:function(a){this._anime.FPS=a,this._anime._interval=1e3/this._anime.FPS},setCurrentState:function(a){"state"===a._ID.split(" ")[0]?(this.currentState=a,this.currentState._init()):console.error(a+"is not a state.")},_updateScreenview:function(){this.view.x=this.canvas.offsetLeft,this.view.y=this.canvas.offsetTop,this.camera.x=0,this.camera.y=0,this.view.width+"px"==this.canvas.style.width&&this.view.height+"px"==this.canvas.style.height||(this.canvas.style.width=this.view.width+"px",this.canvas.style.height=this.view.height+"px"),this.camera.width==this.canvas.width&&this.camera.height==this.canvas.height&&this.camera.width==this.canvas.width&&this.camera.height==this.canvas.height||(this.canvas.width=this.camera.width,this.canvas.height=this.camera.height,this.canvas.width=this.camera.width,this.canvas.height=this.camera.height)},_updatePointerData:function(){for(let a=0;a<10;a++)this.pointerDATA[a]._ID=a,this.pointerDATA[a].trueX=HYPER.Input.Pointer.point[a].x-this.canvas.offsetLeft,this.pointerDATA[a].trueY=HYPER.Input.Pointer.point[a].y-this.canvas.offsetTop,this.pointerDATA[a].scaleFactorX=this.camera.width/this.view.width,this.pointerDATA[a].scaleFactorY=this.camera.height/this.view.height,this.pointerDATA[a].x=this.pointerDATA[a].trueX*this.pointerDATA[a].scaleFactorX,this.pointerDATA[a].y=this.pointerDATA[a].trueY*this.pointerDATA[a].scaleFactorY,this.pointerDATA[a].down=HYPER.Input.Pointer.point[a].down,this.pointerDATA[a].up=HYPER.Input.Pointer.point[a].up,this.pointerDATA[a].dblclick=HYPER.Input.Pointer.point[a].dblclick,this.pointerDATA[a].hold=HYPER.Input.Pointer.point[a].hold,this.pointerDATA[a].click=HYPER.Input.Pointer.point[a].click;this.passedINFO.pointerDATA=this.pointerDATA},_updatePassedInfo:function(){this.passedINFO.canvas=this.canvas,this.passedINFO.ctx=this.ctx,this.passedINFO.view=this.view,this.passedINFO.camera=this.camera,this._updatePointerData()},_updateRenderingSettings:function(){this.autoClear===!0&&HYPER.Graphics.Draw(this.ctx).clearRect(0,0,this.canvas.width,this.canvas.height),this.ctx.mozImageSmoothingEnabled=this.antiAliasing,this.ctx.webkitImageSmoothingEnabled=this.antiAliasing,this.ctx.msImageSmoothingEnabled=this.antiAliasing,this.ctx.imageSmoothingEnabled=this.antiAliasing,0==this.antiAliasing&&"pixelated"!=this.canvas.style.imageRendering?this.canvas.style.imageRendering="pixelated":1==this.antiAliasing&&"auto"!=this.canvas.style.imageRendering&&(this.canvas.style.imageRendering="auto")},_onClick:function(a){this._updatePointerData(),this.currentState._onClick(this.pointerDATA[a]),this.onClick(this.pointerDATA[a])},_onUp:function(a){this._updatePointerData(),this.currentState._onUp(this.pointerDATA[a]),this.onUp(this.pointerDATA[a])},_onDown:function(a){this._updatePointerData(),this.currentState._onDown(this.pointerDATA[a]),this.onDown(this.pointerDATA[a])},_onHold:function(a){this._updatePointerData(),this.currentState._onHold(this.pointerDATA[a]),this.onHold(this.pointerDATA[a])},_onDblClick:function(a){this._updatePointerData(),this.currentState._onDblClick(this.pointerDATA[a]),this.onDblClick(this.pointerDATA[a])},_onKeyUp:function(a){this.currentState._onKeyUp(a),this.onKeyUp(a)},_onKeyDown:function(a){this.currentState._onKeyDown(a),this.onKeyDown(a)},_onKeyHeld:function(a){this.currentState._onKeyHeld(a),this.onKeyHeld(a)},_render:function(){this._anime._now=Date.now(),this._anime._delta=this._anime._now-this._anime._then,this._anime._delta>this._anime._interval&&(this._anime._then=this._anime._now-this._anime._delta%this._anime._interval,this._updateRenderingSettings(),this._updatePassedInfo(),this.currentState._render(this.passedINFO),this.render(this.passedINFO),this.showFPS&&HYPER.Graphics.Draw(this.ctx).setFillColor("#FF0000").text("FPS: "+Math.round(1e3/this._anime._delta),10,10))},_update:function(){this._tick._now=Date.now(),this._tick._delta=this._tick._now-this._tick._then,this._tick._delta>this._tick._interval&&(this._tick._then=this._tick._now-this._tick._delta%this._tick._interval,this._updateScreenview(),this._updatePassedInfo(),this.currentState._update(this.passedINFO),this.update(this.passedINFO))},init:function(){this.currentState._init(),HYPER.Timer.addOnTick(this._looper)}}}(),function(){"use strict";HYPER.State=function(a){a=a||{},a.camera=a.camera||{},a.view=a.view||{};this._ID="state "+Math.random()+Math.random(),this.style=a.style||HYPER.Graphics.DEFAULT_STYLE,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.lastcanvas=document.createElement("canvas"),this.lastctx=this.lastcanvas.getContext("2d"),this._tick={FPS:a.tickFPS||a.tickfps||a.fps||30,_now:0,_then:Date.now(),_interval:1e3/30,_delta:0},this._anime={FPS:a.animeFPS||a.animefps||a.fps||60,_now:0,_then:Date.now(),_interval:1e3/60,_delta:0},this.backgroundColor=a.backgroundColor||"#000000",this.antiAliasing=a.antiAliasing||!1,this.autoClear=a.autoClear||!1,this.smartRendering=a.smartRendering||!1,this.motionBlur=a.motionBlur||!1,this.camera={x:a.camera.x||0,y:a.camera.y||0,width:a.camera.width||1280,height:a.camera.height||720},this.view={x:a.view.x||0,y:a.view.y||0,width:a.view.width||1280,height:a.view.height||720},this.passedINFO={pointerDATA:[]},this.pointerDATA=[{},{},{},{},{},{},{},{},{},{}],this.children=[],this.enableZindex=a.enableZindex||!1,this.render=a.render||no0p,this.update=a.update||no0p,this.init=a.init||no0p,this.onClick=a.onClick||no0p,this.onUp=a.onUp||no0p,this.onDown=a.onDown||no0p,this.onHold=a.onHold||no0p,this.onDblClick=a.onDblClick||no0p,this.onKeyUp=a.onKeyUp||no0p,this.onKeyDown=a.onKeyDown||no0p,this.onKeyHeld=a.onKeyHeld||no0p},HYPER.State.prototype={setTickFPS:function(a){this._tick.FPS=a,this._tick._interval=1e3/this._tick.FPS},setAnimeFPS:function(a){this._anime.FPS=a,this._anime._interval=1e3/this._anime.FPS},addChild:function(a){this.children.push(a)},removeChild:function(a){for(let b=0;b<this.children.length;b++)a._ID===this.children[b]._ID&&this.children.splice(b,1)},removeAllChildren:function(){this.children=[]},_updateRender:function(a){"clear"===this.backgroundColor||this.autoClear?HYPER.Graphics.Draw(this.ctx).clearRect(0,0,this.canvas.width,this.canvas.height):HYPER.Graphics.Draw(this.ctx).setFillColor(this.backgroundColor).rect(0,0,this.canvas.width,this.canvas.height)},_renderChildren:function(a){if(this.enableZindex===!0)for(let a=0;a<this.children.length;a++)for(let b=0;b<this.children.length;b++)Math.round(this.children[b].zIndex)===a&&(this.smartRendering===!0?HYPER.Physics.checkAABBCollision(this.view,this.children[b])&&this.children[b]._render(this.passedINFO):this.children[b]._render(this.passedINFO));else for(let a=0;a<this.children.length;a++)this.smartRendering===!0?HYPER.Physics.checkAABBCollision(this.view,this.children[a])&&this.children[a]._render(this.passedINFO):this.children[a]._render(this.passedINFO)},_updateChildren:function(a){for(let b=0;b<this.children.length;b++)this.children[b]._update(this.passedINFO)},_updatePointerData:function(a){for(var b=0;b<1;b++)this.pointerDATA[b].trueX=a.pointerDATA[b].x-this.view.x+this.camera.x,this.pointerDATA[b].trueY=a.pointerDATA[b].y-this.view.y+this.camera.y,this.pointerDATA[b].scaleFactorX=this.camera.width/this.view.width,this.pointerDATA[b].scaleFactorY=this.camera.height/this.view.height,this.pointerDATA[b].x=this.pointerDATA[b].trueX*this.pointerDATA[b].scaleFactorX-this.camera.x,this.pointerDATA[b].y=this.pointerDATA[b].trueY*this.pointerDATA[b].scaleFactorY-this.camera.y,this.pointerDATA[b].down=HYPER.Input.Pointer.point[b].down,this.pointerDATA[b].up=HYPER.Input.Pointer.point[b].up,this.pointerDATA[b].dblclick=HYPER.Input.Pointer.point[b].dblclick,this.pointerDATA[b].hold=HYPER.Input.Pointer.point[b].hold,this.pointerDATA[b].click=HYPER.Input.Pointer.point[b].down;this.passedINFO.pointerDATA=this.pointerDATA},updatePointerDATA_ID:function(a,b){this.pointerDATA[b].trueX=a.x-this.view.x+this.camera.x,this.pointerDATA[b].trueY=a.y-this.view.y+this.camera.y,this.pointerDATA[b].scaleFactorX=this.camera.width/this.view.width,this.pointerDATA[b].scaleFactorY=this.camera.height/this.view.height,this.pointerDATA[b].x=this.pointerDATA[b].trueX*this.pointerDATA[b].scaleFactorX-this.camera.x,this.pointerDATA[b].y=this.pointerDATA[b].trueY*this.pointerDATA[b].scaleFactorY-this.camera.y,this.pointerDATA[b].down=HYPER.Input.Pointer.point[b].down,this.pointerDATA[b].up=HYPER.Input.Pointer.point[b].up,this.pointerDATA[b].dblclick=HYPER.Input.Pointer.point[b].dblclick,this.pointerDATA[b].hold=HYPER.Input.Pointer.point[b].hold,this.pointerDATA[b].click=HYPER.Input.Pointer.point[b].down},_updatePassedInfo:function(a){this.passedINFO.canvas=this.canvas,this.passedINFO.ctx=this.ctx,this.passedINFO.view=this.view,this.passedINFO.camera=this.camera,this._updatePointerData(a)},_updateRenderingSettings:function(a){this.camera.width==this.canvas.width&&this.camera.height==this.canvas.height||(this.canvas.width=this.camera.width,this.canvas.height=this.camera.height),this.camera.width==this.lastcanvas.width&&this.camera.height==this.lastcanvas.height||(this.lastcanvas.width=this.camera.width,this.lastcanvas.height=this.camera.height),this.ctx.mozImageSmoothingEnabled!=this.antiAliasing&&(this.ctx.mozImageSmoothingEnabled=this.antiAliasing),this.ctx.webkitImageSmoothingEnabled!=this.antiAliasing&&(this.ctx.webkitImageSmoothingEnabled=this.antiAliasing),this.ctx.msImageSmoothingEnabled!=this.antiAliasing&&(this.ctx.msImageSmoothingEnabled=this.antiAliasing),this.ctx.imageSmoothingEnabled!=this.antiAliasing&&(this.ctx.imageSmoothingEnabled=this.antiAliasing),0==this.antiAliasing&&"pixelated"!=this.canvas.style.imageRendering?this.canvas.style.imageRendering="pixelated":1==this.antiAliasing&&"auto"!=this.canvas.style.imageRendering&&(this.canvas.style.imageRendering="auto"),this._updateRender(a)},_onClick:function(a){this.updatePointerDATA_ID(a,a._ID);for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onClick&&this.children[b]._onClick(this.pointerDATA[a._ID]);this.onClick(this.pointerDATA[a._ID])},_onUp:function(a){this.updatePointerDATA_ID(a,a._ID);for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onUp&&this.children[b]._onUp(this.pointerDATA[a._ID]);this.onUp(this.pointerDATA[a._ID])},_onDown:function(a){this.updatePointerDATA_ID(a,a._ID);for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onDown&&this.children[b]._onDown(this.pointerDATA[a._ID]);this.onDown(this.pointerDATA[a._ID])},_onHold:function(a){this.updatePointerDATA_ID(a,a._ID);for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onHold&&this.children[b]._onHold(this.pointerDATA[a._ID]);this.onHold(this.pointerDATA[a._ID])},_onDblClick:function(a){for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onDblClick&&this.children[b]._onDblClick(this.pointerDATA[a._ID]);this.onDblClick(this.pointerDATA[a._ID])},_onKeyDown:function(a){for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onKeyDown&&this.children[b]._onKeyDown(a);this.onKeyDown(a)},_onKeyHeld:function(a){for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onKeyHeld&&this.children[b]._onKeyHeld(a);console.log("hi"),this.onKeyHeld(a)},_onKeyUp:function(a){for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onKeyUp&&this.children[b]._onKeyUp(a);this.onKeyUp(a)},_render:function(a){this._anime._now=Date.now(),this._anime._delta=this._anime._now-this._anime._then,this._anime._delta>this._anime._interval&&(this._anime._then=this._anime._now-this._anime._delta%this._anime._interval,("clear"===this.backgroundColor||this.autoClear)&&HYPER.Graphics.Draw(a.ctx).clearRect(0,0,a.canvas.width,a.canvas.height),this.motionBlur&&HYPER.Graphics.Draw(a.ctx,this.style).bitmap(this.canvas,0,0,this.camera.width,this.camera.height,this.view.x,this.view.y,this.view.width,this.view.height),this._updateRenderingSettings(a),this._updatePassedInfo(a),this._renderChildren(this.passedINFO),this.render(this.passedINFO),this.motionBlur?HYPER.Graphics.Draw(a.ctx,this.style).setAlpha(this.style.alpha/2).bitmap(this.canvas,0,0,this.camera.width,this.camera.height,this.view.x,this.view.y,this.view.width,this.view.height):HYPER.Graphics.Draw(a.ctx,this.style).bitmap(this.canvas,0,0,this.camera.width,this.camera.height,this.view.x,this.view.y,this.view.width,this.view.height))},_update:function(a){this._tick._now=Date.now(),this._tick._delta=this._tick._now-this._tick._then,this._tick._delta>this._tick._interval&&(this._tick._then=this._tick._now-this._tick._delta%this._tick._interval,this._updatePassedInfo(a),this._updateChildren(this.passedINFO),this.update(this.passedINFO))},_init:function(){this.init()}}}(),function(){"use strict";HYPER.Layer=function(a){a=a||{},a.camera=a.camera||{},a.view=a.view||{};this._ID="Layer "+Math.random()+Math.random(),this.style=a.style||HYPER.Graphics.DEFAULT_STYLE,this.canvas=document.createElement("canvas"),this.ctx=this.canvas.getContext("2d"),this.lastcanvas=document.createElement("canvas"),this.lastctx=this.lastcanvas.getContext("2d"),this._tick={FPS:a.tickFPS||a.tickfps||a.fps||30,_now:0,_then:Date.now(),_interval:1e3/30,_delta:0},this._anime={FPS:a.animeFPS||a.animefps||a.fps||60,_now:0,_then:Date.now(),_interval:1e3/60,_delta:0},this.backgroundColor=a.backgroundColor||"#000000",this.antiAliasing=a.antiAliasing||!1,this.autoClear=a.autoClear||!1,this.smartRendering=a.smartRendering||!1,this.motionBlur=a.motionBlur||!1,this.camera={x:a.camera.x||0,y:a.camera.y||0,width:a.camera.width||1280,height:a.camera.height||720},this.view={x:a.view.x||0,y:a.view.y||0,width:a.view.width||1280,height:a.view.height||720},this.passedINFO={pointerDATA:[]},this.pointerDATA=[{},{},{},{},{},{},{},{},{},{}],this.children=[],this.enableZindex=a.enableZindex||!1,this.render=a.render||no0p,this.update=a.update||no0p,this.init=a.init||no0p,this.onClick=a.onClick||no0p,this.onUp=a.onUp||no0p,this.onDown=a.onDown||no0p,this.onHold=a.onHold||no0p,this.onDblClick=a.onDblClick||no0p,this.onKeyUp=a.onKeyUp||no0p,this.onKeyDown=a.onKeyDown||no0p,this.onKeyHeld=a.onKeyHeld||no0p},HYPER.Layer.prototype={setTickFPS:function(a){this._tick.FPS=a,this._tick._interval=1e3/this._tick.FPS},setAnimeFPS:function(a){this._anime.FPS=a,this._anime._interval=1e3/this._anime.FPS},addChild:function(a){this.children.push(a)},removeChild:function(a){for(let b=0;b<this.children.length;b++)a._ID===this.children[b]._ID&&this.children.splice(b,1)},removeAllChildren:function(){this.children=[]},_updateRender:function(a){"clear"===this.backgroundColor||this.autoClear?HYPER.Graphics.Draw(this.ctx).clearRect(0,0,this.canvas.width,this.canvas.height):HYPER.Graphics.Draw(this.ctx).setFillColor(this.backgroundColor).rect(0,0,this.canvas.width,this.canvas.height)},_renderChildren:function(a){if(this.enableZindex===!0)for(let a=0;a<this.children.length;a++)for(let b=0;b<this.children.length;b++)Math.round(this.children[b].zIndex)===a&&(this.smartRendering===!0?HYPER.Physics.checkAABBCollision(this.view,this.children[b])&&this.children[b]._render(this.passedINFO):this.children[b]._render(this.passedINFO));else for(let a=0;a<this.children.length;a++)this.smartRendering===!0?HYPER.Physics.checkAABBCollision(this.view,this.children[a])&&this.children[a]._render(this.passedINFO):this.children[a]._render(this.passedINFO)},_updateChildren:function(a){for(let b=0;b<this.children.length;b++)this.children[b]._update(this.passedINFO)},_updatePointerData:function(a){for(var b=0;b<1;b++)this.pointerDATA[b].trueX=a.pointerDATA[b].x-this.view.x+this.camera.x,this.pointerDATA[b].trueY=a.pointerDATA[b].y-this.view.y+this.camera.y,this.pointerDATA[b].scaleFactorX=this.camera.width/this.view.width,this.pointerDATA[b].scaleFactorY=this.camera.height/this.view.height,this.pointerDATA[b].x=this.pointerDATA[b].trueX*this.pointerDATA[b].scaleFactorX-this.camera.x,this.pointerDATA[b].y=this.pointerDATA[b].trueY*this.pointerDATA[b].scaleFactorY-this.camera.y,this.pointerDATA[b].down=HYPER.Input.Pointer.point[b].down,this.pointerDATA[b].up=HYPER.Input.Pointer.point[b].up,this.pointerDATA[b].dblclick=HYPER.Input.Pointer.point[b].dblclick,this.pointerDATA[b].hold=HYPER.Input.Pointer.point[b].hold,this.pointerDATA[b].click=HYPER.Input.Pointer.point[b].down;this.passedINFO.pointerDATA=this.pointerDATA},updatePointerDATA_ID:function(a,b){this.pointerDATA[b].trueX=a.x-this.view.x+this.camera.x,this.pointerDATA[b].trueY=a.y-this.view.y+this.camera.y,this.pointerDATA[b].scaleFactorX=this.camera.width/this.view.width,this.pointerDATA[b].scaleFactorY=this.camera.height/this.view.height,this.pointerDATA[b].x=this.pointerDATA[b].trueX*this.pointerDATA[b].scaleFactorX-this.camera.x,this.pointerDATA[b].y=this.pointerDATA[b].trueY*this.pointerDATA[b].scaleFactorY-this.camera.y,this.pointerDATA[b].down=HYPER.Input.Pointer.point[b].down,this.pointerDATA[b].up=HYPER.Input.Pointer.point[b].up,this.pointerDATA[b].dblclick=HYPER.Input.Pointer.point[b].dblclick,this.pointerDATA[b].hold=HYPER.Input.Pointer.point[b].hold,this.pointerDATA[b].click=HYPER.Input.Pointer.point[b].down},_updatePassedInfo:function(a){this.passedINFO.canvas=this.canvas,this.passedINFO.ctx=this.ctx,this.passedINFO.view=this.view,this.passedINFO.camera=this.camera,this._updatePointerData(a)},_updateRenderingSettings:function(a){this.camera.width==this.canvas.width&&this.camera.height==this.canvas.height||(this.canvas.width=this.camera.width,this.canvas.height=this.camera.height),this.camera.width==this.lastcanvas.width&&this.camera.height==this.lastcanvas.height||(this.lastcanvas.width=this.camera.width,this.lastcanvas.height=this.camera.height),this.ctx.mozImageSmoothingEnabled!=this.antiAliasing&&(this.ctx.mozImageSmoothingEnabled=this.antiAliasing),this.ctx.webkitImageSmoothingEnabled!=this.antiAliasing&&(this.ctx.webkitImageSmoothingEnabled=this.antiAliasing),this.ctx.msImageSmoothingEnabled!=this.antiAliasing&&(this.ctx.msImageSmoothingEnabled=this.antiAliasing),this.ctx.imageSmoothingEnabled!=this.antiAliasing&&(this.ctx.imageSmoothingEnabled=this.antiAliasing),0==this.antiAliasing&&"pixelated"!=this.canvas.style.imageRendering?this.canvas.style.imageRendering="pixelated":1==this.antiAliasing&&"auto"!=this.canvas.style.imageRendering&&(this.canvas.style.imageRendering="auto"),this._updateRender(a)},_onClick:function(a){this.updatePointerDATA_ID(a,a._ID);for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onClick&&this.children[b]._onClick(this.pointerDATA[a._ID]);this.onClick(this.pointerDATA[a._ID])},_onUp:function(a){this.updatePointerDATA_ID(a,a._ID);for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onUp&&this.children[b]._onUp(this.pointerDATA[a._ID]);this.onUp(this.pointerDATA[a._ID])},_onDown:function(a){this.updatePointerDATA_ID(a,a._ID);for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onDown&&this.children[b]._onDown(this.pointerDATA[a._ID]);this.onDown(this.pointerDATA[a._ID])},_onHold:function(a){this.updatePointerDATA_ID(a,a._ID);for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onHold&&this.children[b]._onHold(this.pointerDATA[a._ID]);this.onHold(this.pointerDATA[a._ID])},_onDblClick:function(a){for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onDblClick&&this.children[b]._onDblClick(this.pointerDATA[a._ID]);this.onDblClick(this.pointerDATA[a._ID])},_onKeyDown:function(a){for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onKeyDown&&this.children[b]._onKeyDown(a);this.onKeyDown(a)},_onKeyHeld:function(a){for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onKeyHeld&&this.children[b]._onKeyHeld(a);console.log("hi"),this.onKeyHeld(a)},_onKeyUp:function(a){for(let b=0;b<this.children.length;b++)this.children[b].alive&&this.children[b]._onKeyUp&&this.children[b]._onKeyUp(a);this.onKeyUp(a)},_render:function(a){this._anime._now=Date.now(),this._anime._delta=this._anime._now-this._anime._then,this._anime._delta>this._anime._interval&&(this._anime._then=this._anime._now-this._anime._delta%this._anime._interval,("clear"===this.backgroundColor||this.autoClear)&&HYPER.Graphics.Draw(a.ctx).clearRect(0,0,a.canvas.width,a.canvas.height),this.motionBlur&&HYPER.Graphics.Draw(a.ctx,this.style).bitmap(this.canvas,0,0,this.camera.width,this.camera.height,this.view.x,this.view.y,this.view.width,this.view.height),this._updateRenderingSettings(a),this._updatePassedInfo(a),this._renderChildren(this.passedINFO),this.render(this.passedINFO),this.motionBlur?HYPER.Graphics.Draw(a.ctx,this.style).setAlpha(this.style.alpha/2).bitmap(this.canvas,0,0,this.camera.width,this.camera.height,this.view.x,this.view.y,this.view.width,this.view.height):HYPER.Graphics.Draw(a.ctx,this.style).bitmap(this.canvas,0,0,this.camera.width,this.camera.height,this.view.x,this.view.y,this.view.width,this.view.height))},_update:function(a){this._tick._now=Date.now(),this._tick._delta=this._tick._now-this._tick._then,this._tick._delta>this._tick._interval&&(this._tick._then=this._tick._now-this._tick._delta%this._tick._interval,this._updatePassedInfo(a),this._updateChildren(this.passedINFO),this.update(this.passedINFO))},_init:function(){this.init()}}}(),function(){"use strict";HYPER.Graphics={},HYPER.Graphics.cutHex=function(a){return"#"==a.charAt(0)?a.substring(1,7):a},HYPER.Graphics.hexToRed=function(a){return parseInt(HYPER.Graphics.cutHex(a).substring(0,2),16)},HYPER.Graphics.hexToGreen=function(a){return parseInt(HYPER.Graphics.cutHex(a).substring(2,4),16)},HYPER.Graphics.hexToBlue=function(a){return parseInt(HYPER.Graphics.cutHex(a).substring(4,6),16)}}(),function(){"use strict";HYPER.Graphics.Style=function(a){a="undefined"==typeof a?{}:a,a.shadow=a.shadow||{},this._ID="style "+Math.random()+Math.random(),this.type="style",this.alpha="undefined"==typeof a.alpha?1:a.alpha,this.color="undefined"==typeof a.color?"#000000":a.color,this.linecap="undefined"==typeof a.linecap?"butt":a.linecap,this.linejoin="undefined"==typeof a.linejoin?"miter":a.linejoin,this.miterLimit="undefined"==typeof a.miterLimit?10:a.miterLimit,this.strokeColor="undefined"==typeof a.strokeColor?"#000000":a.strokeColor,this.lineWidth="undefined"==typeof a.lineWidth?1:a.lineWidth,this.fill="undefined"==typeof a.fill||a.fill,this.stroke="undefined"!=typeof a.stroke&&a.stroke,this.lineDashOffset="undefined"==typeof a.lineDashOffset?0:a.lineDashOffset,this.fontSize="undefined"==typeof a.fontSize?12:a.fontSize,this.fontFamily="undefined"==typeof a.fontFamily?"Arial":a.fontFamily,this.globalCompositeOperation="undefined"==typeof a.globalCompositeOperation?"source-over":a.globalCompositeOperation,this.shadow=a.shadow,this.shadow.color="undefined"==typeof a.shadow.color?"#000000":a.shadow.color,this.shadow.blur="undefined"==typeof a.shadow.blur?0:a.shadow.blur,this.shadow.offsetX="undefined"==typeof a.shadow.offsetX?0:a.shadow.offsetX,this.shadow.offsetY="undefined"==typeof a.shadow.offsetY?0:a.shadow.offsetY},HYPER.Graphics.Style.prototype={applyTo:function(a){HYPER.Graphics.styleToCTX(this,a)}},HYPER.Graphics.styleToCTX=function(a,b){b.globalAlpha=a.alpha||1,b.fillStyle=a.color||"#000000",b.lineCap=a.lineCap||"butt",b.linejoin=a.linejoin||"miter",b.miterLimit=a.miterLimit||10,b.strokeStyle=a.strokeColor||"#000000",b.lineWidth=a.lineWidth||1,b.lineDashOffset=a.lineDashOffset||0,b.textAlign="left",b.textBaseline="top",b.font=a.fontSize||"12px "+a.fontFamily||"Arial",b.globalCompositeOperation=a.globalCompositeOperation||"source-over",b.shadowColor=a.shadow.color||"#000000",b.shadowBlur=a.shadow.blur||0,b.shadowOffsetX=a.shadow.offsetX||0,b.shadowOffsetY=a.shadow.offsetY||0},HYPER.Graphics.DEFAULT_STYLE=new HYPER.Graphics.Style}(),function(){"use strict";HYPER.Graphics.Draw=function(a,b,c){return this.ctx=a,this.autoStart=c||!0,this.style=b||HYPER.Graphics.DEFAULT_STYLE,HYPER.Graphics.styleToCTX(this.style,this.ctx),this.autoStart&&this.ctx.beginPath(),this.beginPath=function(){return this.ctx.beginPath(),this},this.closePath=function(){return this.ctx.closePath(),this},this.fillPath=function(){return this.ctx.fill(),this},this.strokePath=function(){return this.ctx.stroke(),this},this.setFillColor=function(a){return this.ctx.fillStyle=a||this.ctx.fillStyle,this},this.setStrokeColor=function(a){return this.ctx.strokeStyle=a||this.ctx.strokeStyle,this},this.setAlpha=function(a){return this.ctx.globalAlpha=a,this},this.setStyle=function(a){return"style"===a._ID.split(" ")[0]?(this.style=a||{},HYPER.Graphics.styleToCTX(this.style,this.ctx)):console.error(state+"is not a style."),this},this.clearRect=function(a,b,c,d){this.ctx.clearRect(a,b,c,d)},this.line=function(a,b,c,d){return this.autoStart===!0&&this.ctx.beginPath(),this.ctx.moveTo(a,b),this.ctx.lineTo(c,d),this.style.fill&&this.ctx.fill(),this.style.stroke&&this.ctx.stroke(),this.autoStart===!0&&this.ctx.closePath(),this},this.circle=function(a,b,c,d,e,f){return d=d||0,e=e||360,f=f||!1,this.autoStart===!0&&this.ctx.beginPath(),this.ctx.arc(a,b,c,HYPER.Math.degreesToRadians(d),HYPER.Math.degreesToRadians(e),f),this.style.fill&&this.ctx.fill(),this.style.stroke&&this.ctx.stroke(),this.autoStart===!0&&this.ctx.closePath(),this},this.quadraticCurve=function(a,b,c,d,e,f){return this.autoStart===!0&&this.ctx.beginPath(),this.ctx.moveTo(a,b),this.ctx.quadraticCurveTo(c,d,e,f),this.style.fill&&this.ctx.fill(),this.style.stroke&&this.ctx.stroke(),this.autoStart===!0&&this.ctx.closePath(),this},this.bezierCurve=function(a,b,c,d,e,f,g,h){return this.autoStart===!0&&this.ctx.beginPath(),this.ctx.moveTo(a,b),this.ctx.bezierCurveTo(c,d,e,f,g,h),this.style.fill&&this.ctx.fill(),this.style.stroke&&this.ctx.stroke(),this.autoStart===!0&&this.ctx.closePath(),this},this.arcTo=function(a,b,c,d,e,f,g){return this.autoStart===!0&&this.ctx.beginPath(),this.ctx.moveTo(a,b),this.ctx.arcTo(c,d,e,f,g),this.style.fill&&this.ctx.fill(),this.style.stroke&&this.ctx.stroke(),this.autoStart===!0&&this.ctx.closePath(),this},this.rect=function(a,b,c,d,e,f,g){return e=e||0,f=f||0,g=g||0,this.autoStart===!0&&this.ctx.beginPath(),0!=e?(this.ctx.translate(a+f,b+g),this.ctx.rotate(HYPER.Math.degreesToRadians(e)),this.ctx.rect(-f,-g,c,d),this.ctx.rotate(-HYPER.Math.degreesToRadians(e)),this.ctx.translate(-(a+f),-(b+g))):this.ctx.rect(a,b,c,d),this.style.fill&&this.ctx.fill(),this.style.stroke&&this.ctx.stroke(),this.autoStart===!0&&this.ctx.closePath(),this},this.triangle=function(a,b,c,d,e,f,g,h,i){return g=g||0,h=h||0,i=i||0,this.autoStart===!0&&this.ctx.beginPath(),0!=g?(this.ctx.translate(a+h,b+i),this.ctx.rotate(HYPER.Math.degreesToRadians(g)),this.ctx.moveTo(a-a-h,b-a-i),this.ctx.lineTo(c-a-h,d-b-i),this.ctx.lineTo(e-a-h,f-b-i),this.ctx.lineTo(a-a-h,b-b-i),this.ctx.rotate(-HYPER.Math.degreesToRadians(g)),this.ctx.translate(-(a+h),-(b+i))):(this.ctx.moveTo(a,b),this.ctx.lineTo(c,d),this.ctx.lineTo(e,f)),this.autoStart===!0&&this.ctx.closePath(),this.style.fill&&this.ctx.fill(),this.style.stroke&&this.ctx.stroke(),this},this.polygon=function(a,b,c,d){if(b=b||0,c=c||0,d=d||0,this.autoStart===!0&&this.ctx.beginPath(),0!=b){this.ctx.translate(a[0]+c,a[1]+d),this.ctx.rotate(HYPER.Math.degreesToRadians(b)),this.ctx.moveTo(a[0]-a[0]-c,a[1]-a[1]-d);for(let e=0;e<a.length;e+=2)this.ctx.lineTo(a[e]-a[0]-c,a[e+1]-a[1]-d);this.ctx.lineTo(a[0]-a[0]-c,a[1]-a[1]-d),this.ctx.rotate(-HYPER.Math.degreesToRadians(b)),this.ctx.translate(-(a[0]+c),-(a[1]+d))}else{this.ctx.moveTo(a[0],a[1]);for(let b=0;b<a.length;b+=2)this.ctx.lineTo(a[b],a[b+1]);this.ctx.lineTo(a[0],a[1])}return this.autoStart===!0&&this.ctx.closePath(),this.style.fill&&this.ctx.fill(),this.style.stroke&&this.ctx.stroke(),this},this.text=function(a,b,c,d,e,f){return d=d||0,e=e||0,f=f||0,this.autoStart===!0&&this.ctx.beginPath(),0!=d?(this.ctx.translate(b+e,c+f),this.ctx.rotate(HYPER.Math.degreesToRadians(d)),this.style.fill&&this.ctx.fillText(a,-e,-f),this.style.stroke&&this.ctx.strokeText(a,-e,-f),
this.ctx.rotate(-HYPER.Math.degreesToRadians(d)),this.ctx.translate(-(b+e),-(c+f))):(this.style.fill&&this.ctx.fillText(a,b,c),this.style.stroke&&this.ctx.strokeText(a,b,c)),this.autoStart===!0&&this.ctx.closePath(),this},this.bitmap=function(a,b,c,d,e,f,g,h,i,j,k,l,m,n){return j=j||0,k=k||0,l=l||0,a.bitmap&&(a=a.bitmap),f=f||0,g=g||0,m=m||1,n=n||1,h=h||a.width,i=i||a.height,this.autoStart===!0&&this.ctx.beginPath(),0!=j||1!=m||1!=n?(this.ctx.translate(b+k,c+l),this.ctx.rotate(HYPER.Math.degreesToRadians(j)),this.ctx.scale(m,n),this.ctx.drawImage(a,f,g,h,i,-k,-l,d,e),this.ctx.scale(1/m,1/n),this.ctx.rotate(-HYPER.Math.degreesToRadians(j)),this.ctx.translate(-(b+k),-(c+l))):this.ctx.drawImage(a,f,g,h,i,b,c,d,e),this.style.fill&&this.ctx.fill(),this.style.stroke&&this.ctx.stroke(),this.autoStart===!0&&this.ctx.closePath(),this},this}}(),function(){"use strict";HYPER.Graphics.Animation=function(a){this.spriteSheet=a.spriteSheet||{},this._ID="animation "+Math.random()+Math.random(),this.type="animation",this.width=a.width||this.spriteSheet.width||0,this.height=a.height||this.spriteSheet.height||0,this.currentFrame=a.currentFrame||0,this.paused=!0,this.currentAnimation=!1,this.onLoopEnd=a.onLoopEnd||no0p,this.onFrame=a.onFrame||no0p,this.FPS=30,this._now,this._then=Date.now(),this._interval=1e3/this.FPS,this._delta,this.update=a.update||no0p,this.render=a.render||no0p},HYPER.Graphics.Animation.prototype={play:function(a,b){this.currentAnimation=this.spriteSheet.animations[a],this.FPS=this.spriteSheet.animations[a].fps,this._interval=1e3/this.FPS,this.currentFrame=b||this.currentFrame||0,this.paused=!1},pause:function(){this.paused=!0},start:function(a,b){this.currentFrame=b||0,this.currentAnimation=this.spriteSheet.animations[a],this.FPS=this.spriteSheet.animations[a].fps,this.paused=!1},stop:function(){this.paused=!0,this.currentFrame=0},_update:function(a){this._now=Date.now(),this._delta=this._now-this._then,this._delta>this._interval&&(this._then=this._now-this._delta%this._interval,!this.paused&&this.currentAnimation&&(this.currentFrame+=1,this.onFrame(this.currentFrame),this.currentAnimation.onFrame(this.currentFrame),this.currentFrame>=this.currentAnimation.frames.length&&(this.currentAnimation.onLoop(),this.currentFrame=0,this.currentAnimation.loop||(this.paused=!0))))},_render:function(a,b,c,d,e,f,g,h,i,j){if(this.currentAnimation){b=b||0,c=c||0,d=d||0,e=e||0,f=f||0,g=g||0,h=h||0,i=i||1,j=j||1;var k="";i<0&&(k="x"),j<0&&(k="y"),i<0&&j<0&&(k="xy"),i=Math.abs(i),j=Math.abs(j),"x"===k?HYPER.Graphics.Draw(a.ctx).bitmap(this.spriteSheet.flippedX.bitmap,b,c,d,e,-this.spriteSheet.frameINFO[this.currentFrame].x+this.spriteSheet.flippedX.bitmap.width,this.spriteSheet.frameINFO[this.currentFrame].y,-this.spriteSheet.frameINFO[this.currentFrame].width,this.spriteSheet.frameINFO[this.currentFrame].height,f,g,h,i,j):"xy"===k?HYPER.Graphics.Draw(a.ctx).bitmap(this.spriteSheet.flippedXY.bitmap,b,c,d,e,-this.spriteSheet.frameINFO[this.currentFrame].x+this.spriteSheet.flippedX.bitmap.width,-this.spriteSheet.frameINFO[this.currentFrame].y+this.spriteSheet.flippedX.bitmap.height,-this.spriteSheet.frameINFO[this.currentFrame].width,-this.spriteSheet.frameINFO[this.currentFrame].height,f,g,h,i,j):"y"===k?HYPER.Graphics.Draw(a.ctx).bitmap(this.spriteSheet.flippedY.bitmap,b,c,d,e,this.spriteSheet.frameINFO[this.currentFrame].x,-this.spriteSheet.frameINFO[this.currentFrame].y+this.spriteSheet.flippedX.bitmap.height,this.spriteSheet.frameINFO[this.currentFrame].width,-this.spriteSheet.frameINFO[this.currentFrame].height,f,g,h,i,j):HYPER.Graphics.Draw(a.ctx).bitmap(this.spriteSheet.bitmap,b,c,d,e,this.spriteSheet.frameINFO[this.currentFrame].x,this.spriteSheet.frameINFO[this.currentFrame].y,this.spriteSheet.frameINFO[this.currentFrame].width,this.spriteSheet.frameINFO[this.currentFrame].height,f,g,h,i,j)}}}}(),function(){"use strict";HYPER.Sprite=function(a){a=a||{},this._ID="sprite "+Math.random()+Math.random(),this.body={},this.texture=a.texture||{_render:no0p,_update:no0p,frames:{},bitmap:{},type:""},"animation"===this.texture.type,"spritesheet"===this.texture.type&&(this.texture=new HYPER.Graphics.Animation({spriteSheet:this.texture})),this.texture.frames=this.texture.frames||{},this.texture.bitmap=this.texture.bitmap||{},this.locked=!1,this.lockedOffset={x:0,y:0},this.type="sprite",this.style=a.style||HYPER.Graphics.DEFAULT_STYLE,this.zIndex=a.zIndex||0,this.x=a.x||0,this.y=a.y||0,this.width=a.width||this.texture.width||32,this.height=a.height||this.texture.height||32,this.angle=a.angle||0,this.rotX=a.rotX||this.width/2,this.rotY=a.rotY||this.height/2,this.visible=!0,this.active=!0,this.alive=!0,this.lifeTime=a.lifeTime||0,this.health=a.health||1,this.maxHealth=a.health||1,this.scaleX=a.scaleX||1,this.scaleY=a.scaleY||1,this.flippedX=a.flippedX||!1,this.flippedY=a.flippedY||!1,this.autoCull=a.autoCull||!1,this.render=a.render||no0p,this.update=a.update||no0p,this.onDeath=a.onDeath||no0p,this.onClick=a.onClick||no0p,this.onUp=a.onUp||no0p,this.onDown=a.onDown||no0p,this.onHold=a.onHold||no0p,this.onDblClick=a.onDblClick||no0p,this.onHover=a.onHover||no0p},HYPER.Sprite.prototype={lockTo:function(a,b,c){a&&(this.locked=a,this.lockedOffset.x=b||0,this.lockedOffset.y=c||0,this.body&&"boxJSAABB"===this.body.type&&(this.body.fixed=!0))},unlock:function(){this.locked=!1,this.lockedOffset.x=0,this.lockedOffset.y=0,this.body&&"boxJSAABB"===this.body.type&&(this.body.fixed=!1)},damage:function(a){this.health-=a},heal:function(a){this.health+=a},setPos:function(a,b){this.x=a,this.y=b,"boxJSAABB"===this.body.type&&(this.body.pos.x=a,this.body.pos.y=b)},kill:function(){this.visible=!1,this.active=!1,this.alive=!1,"boxJSAABB"===this.body.type&&(this.body.active=!1)},revive:function(a){this.health=a||this.maxHealth||1,this.visible=!0,this.active=!0,this.alive=!0,"boxJSAABB"===this.body.type&&(this.body.active=!0)},_onClick:function(a){this.x<a.x&&this.y<a.y&&this.x+this.width>a.x&&this.y+this.height>a.y&&this.onClick(a)},_onUp:function(a){this.x<a.x&&this.y<a.y&&this.x+this.width>a.x&&this.y+this.height>a.y&&this.onUp(a)},_onDown:function(a){this.x<a.x&&this.y<a.y&&this.x+this.width>a.x&&this.y+this.height>a.y&&this.onDown(a)},_onHold:function(a){this.x<a.x&&this.y<a.y&&this.x+this.width>a.x&&this.y+this.height>a.y&&this.onHold(a)},_onDblClick:function(a){this.x<a.x&&this.y<a.y&&this.x+this.width>a.x&&this.y+this.height>a.y&&this.onDblClick(a)},_render:function(a){var b=!0;if(this.autoCull===!0&&(b=!!HYPER.Physics.checkAABBCollision(this,a.camera)),this.visible&&this.alive&&b){var c=1,d=1;this.flippedX&&(c=-1),this.flippedY&&(d=-1),"animation"===this.texture.type?this.texture._render(a,this.x-a.camera.x,this.y-a.camera.y,this.width,this.height,this.angle,this.rotX,this.rotY,this.scaleX*c,this.scaleY*d):"bitmap"===this.texture.type&&(this.flippedX&&!this.flippedY?HYPER.Graphics.Draw(a.ctx).bitmap(this.texture.flippedX.bitmap,this.x-a.camera.x,this.y-a.camera.y,this.width,this.height,0,0,this.texture.width,this.texture.height,this.angle,this.rotX,this.rotY,this.scaleX,this.scaleY):this.flippedX&&this.flippedY?HYPER.Graphics.Draw(a.ctx).bitmap(this.texture.flippedY.bitmap,this.x-a.camera.x,this.y-a.camera.y,this.width,this.height,0,0,this.texture.width,this.texture.height,this.angle,this.rotX,this.rotY,this.scaleX,this.scaleY):!this.flippedX&&this.flippedY?HYPER.Graphics.Draw(a.ctx).bitmap(this.texture.flippedXY.bitmap,this.x-a.camera.x,this.y-a.camera.y,this.width,this.height,0,0,this.texture.width,this.texture.height,this.angle,this.rotX,this.rotY,this.scaleX,this.scaleY):HYPER.Graphics.Draw(a.ctx).bitmap(this.texture.bitmap,this.x-a.camera.x,this.y-a.camera.y,this.width,this.height,0,0,this.texture.width,this.texture.height,this.angle,this.rotX,this.rotY,this.scaleX,this.scaleY)),this.render(a,this)}},_update:function(a){if(this.active&&this.alive){for(let b=0;b<a.pointerDATA.length;b++)this.x<a.pointerDATA[b].x&&this.y<a.pointerDATA[b].y&&this.x+this.width>a.pointerDATA[b].x&&this.y+this.height>a.pointerDATA[b].y&&this.onHover(a.pointerDATA[b]);"boxJSAABB"===this.body.type&&(this.x=this.body.pos.x,this.y=this.body.pos.y,this.width=this.body.size.width,this.height=this.body.size.height,this.angle=this.body.angularPos,this.rotX=this.body.center.x,this.rotY=this.body.center.y),this.locked&&(this.setPos(this.locked.x+this.lockedOffset.x,this.locked.y+this.lockedOffset.y),this.body&&"boxJSAABB"===this.body.type&&(this.body.fixed=!0)),this.texture._update&&this.texture._update(a,this.x,this.y,this.width,this.height,this.angle,this.rotX,this.rotY,this.scaleX,this.scaleY),this.health<=0&&this.kill(),this.health>this.maxHealth&&(this.health=this.maxHealth),this.update(a,this)}this.lifeTime>0&&(this.lifeTime--,this.lifeTime<=0&&this.kill())}}}(),function(){"use strict";HYPER.init=function(){return HYPER.Timer.init(),HYPER.Input.init(),HYPER}}();